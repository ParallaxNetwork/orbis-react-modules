(function(Z,c){typeof exports=="object"&&typeof module<"u"?c(exports,require("react"),require("@orbisclub/orbis-sdk"),require("react-string-replace"),require("luxon"),require("ethereum-blockies-base64"),require("@radix-ui/react-dropdown-menu"),require("@radix-ui/react-alert-dialog")):typeof define=="function"&&define.amd?define(["exports","react","@orbisclub/orbis-sdk","react-string-replace","luxon","ethereum-blockies-base64","@radix-ui/react-dropdown-menu","@radix-ui/react-alert-dialog"],c):(Z=typeof globalThis<"u"?globalThis:Z||self,c(Z["orbis-react-modules"]={},Z.require$$0,Z.orbisSdk,Z.reactStringReplace,Z.luxon,Z.makeBlockie,Z.DropdownMenu,Z.AlertDialog))})(this,function(Z,c,ct,lt,pe,ut,dt,ft){"use strict";const ve=n=>n&&typeof n=="object"&&"default"in n?n:{default:n};function Pe(n){if(n&&n.__esModule)return n;const o=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(n){for(const a in n)if(a!=="default"){const p=Object.getOwnPropertyDescriptor(n,a);Object.defineProperty(o,a,p.get?p:{enumerable:!0,get:()=>n[a]})}}return o.default=n,Object.freeze(o)}const ke=ve(c),re=ve(lt),mt=ve(ut),X=Pe(dt),Q=Pe(ft);var ce={exports:{}},ne={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ne;function ht(){if(Ne)return ne;Ne=1;var n=ke.default,o=Symbol.for("react.element"),a=Symbol.for("react.fragment"),p=Object.prototype.hasOwnProperty,d=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,y={key:!0,ref:!0,__self:!0,__source:!0};function A(_,u,l){var v,i={},E=null,T=null;l!==void 0&&(E=""+l),u.key!==void 0&&(E=""+u.key),u.ref!==void 0&&(T=u.ref);for(v in u)p.call(u,v)&&!y.hasOwnProperty(v)&&(i[v]=u[v]);if(_&&_.defaultProps)for(v in u=_.defaultProps,u)i[v]===void 0&&(i[v]=u[v]);return{$$typeof:o,type:_,key:E,ref:T,props:i,_owner:d.current}}return ne.Fragment=a,ne.jsx=A,ne.jsxs=A,ne}var ae={};/**
 * @license React
 * react-jsx-runtime.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Oe;function pt(){return Oe||(Oe=1,process.env.NODE_ENV!=="production"&&function(){var n=ke.default,o=Symbol.for("react.element"),a=Symbol.for("react.portal"),p=Symbol.for("react.fragment"),d=Symbol.for("react.strict_mode"),y=Symbol.for("react.profiler"),A=Symbol.for("react.provider"),_=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),v=Symbol.for("react.suspense_list"),i=Symbol.for("react.memo"),E=Symbol.for("react.lazy"),T=Symbol.for("react.offscreen"),j=Symbol.iterator,B="@@iterator";function H(e){if(e===null||typeof e!="object")return null;var r=j&&e[j]||e[B];return typeof r=="function"?r:null}var g=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function h(e){{for(var r=arguments.length,s=new Array(r>1?r-1:0),f=1;f<r;f++)s[f-1]=arguments[f];P("error",e,s)}}function P(e,r,s){{var f=g.ReactDebugCurrentFrame,S=f.getStackAddendum();S!==""&&(r+="%s",s=s.concat([S]));var x=s.map(function(C){return String(C)});x.unshift("Warning: "+r),Function.prototype.apply.call(console[e],console,x)}}var k=!1,z=!1,F=!1,K=!1,Y=!1,W;W=Symbol.for("react.module.reference");function q(e){return!!(typeof e=="string"||typeof e=="function"||e===p||e===y||Y||e===d||e===l||e===v||K||e===T||k||z||F||typeof e=="object"&&e!==null&&(e.$$typeof===E||e.$$typeof===i||e.$$typeof===A||e.$$typeof===_||e.$$typeof===u||e.$$typeof===W||e.getModuleId!==void 0))}function oe(e,r,s){var f=e.displayName;if(f)return f;var S=r.displayName||r.name||"";return S!==""?s+"("+S+")":s}function $(e){return e.displayName||"Context"}function I(e){if(e==null)return null;if(typeof e.tag=="number"&&h("Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue."),typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case p:return"Fragment";case a:return"Portal";case y:return"Profiler";case d:return"StrictMode";case l:return"Suspense";case v:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case _:var r=e;return $(r)+".Consumer";case A:var s=e;return $(s._context)+".Provider";case u:return oe(e,e.render,"ForwardRef");case i:var f=e.displayName||null;return f!==null?f:I(e.type)||"Memo";case E:{var S=e,x=S._payload,C=S._init;try{return I(C(x))}catch{return null}}}return null}var R=Object.assign,m=0,N,D,V,G,Ye,Ue,ze;function Ge(){}Ge.__reactDisabledLog=!0;function jt(){{if(m===0){N=console.log,D=console.info,V=console.warn,G=console.error,Ye=console.group,Ue=console.groupCollapsed,ze=console.groupEnd;var e={configurable:!0,enumerable:!0,value:Ge,writable:!0};Object.defineProperties(console,{info:e,log:e,warn:e,error:e,group:e,groupCollapsed:e,groupEnd:e})}m++}}function Zt(){{if(m--,m===0){var e={configurable:!0,enumerable:!0,writable:!0};Object.defineProperties(console,{log:R({},e,{value:N}),info:R({},e,{value:D}),warn:R({},e,{value:V}),error:R({},e,{value:G}),group:R({},e,{value:Ye}),groupCollapsed:R({},e,{value:Ue}),groupEnd:R({},e,{value:ze})})}m<0&&h("disabledDepth fell below zero. This is a bug in React. Please file an issue.")}}var we=g.ReactCurrentDispatcher,ye;function ue(e,r,s){{if(ye===void 0)try{throw Error()}catch(S){var f=S.stack.trim().match(/\n( *(at )?)/);ye=f&&f[1]||""}return`
`+ye+e}}var Ce=!1,de;{var It=typeof WeakMap=="function"?WeakMap:Map;de=new It}function Ke(e,r){if(!e||Ce)return"";{var s=de.get(e);if(s!==void 0)return s}var f;Ce=!0;var S=Error.prepareStackTrace;Error.prepareStackTrace=void 0;var x;x=we.current,we.current=null,jt();try{if(r){var C=function(){throw Error()};if(Object.defineProperty(C.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(C,[])}catch(J){f=J}Reflect.construct(e,[],C)}else{try{C.call()}catch(J){f=J}e.call(C.prototype)}}else{try{throw Error()}catch(J){f=J}e()}}catch(J){if(J&&f&&typeof J.stack=="string"){for(var w=J.stack.split(`
`),L=f.stack.split(`
`),O=w.length-1,M=L.length-1;O>=1&&M>=0&&w[O]!==L[M];)M--;for(;O>=1&&M>=0;O--,M--)if(w[O]!==L[M]){if(O!==1||M!==1)do if(O--,M--,M<0||w[O]!==L[M]){var U=`
`+w[O].replace(" at new "," at ");return e.displayName&&U.includes("<anonymous>")&&(U=U.replace("<anonymous>",e.displayName)),typeof e=="function"&&de.set(e,U),U}while(O>=1&&M>=0);break}}}finally{Ce=!1,we.current=x,Zt(),Error.prepareStackTrace=S}var te=e?e.displayName||e.name:"",it=te?ue(te):"";return typeof e=="function"&&de.set(e,it),it}function Lt(e,r,s){return Ke(e,!1)}function Ft(e){var r=e.prototype;return!!(r&&r.isReactComponent)}function fe(e,r,s){if(e==null)return"";if(typeof e=="function")return Ke(e,Ft(e));if(typeof e=="string")return ue(e);switch(e){case l:return ue("Suspense");case v:return ue("SuspenseList")}if(typeof e=="object")switch(e.$$typeof){case u:return Lt(e.render);case i:return fe(e.type,r,s);case E:{var f=e,S=f._payload,x=f._init;try{return fe(x(S),r,s)}catch{}}}return""}var me=Object.prototype.hasOwnProperty,Je={},Qe=g.ReactDebugCurrentFrame;function he(e){if(e){var r=e._owner,s=fe(e.type,e._source,r?r.type:null);Qe.setExtraStackFrame(s)}else Qe.setExtraStackFrame(null)}function Vt(e,r,s,f,S){{var x=Function.call.bind(me);for(var C in e)if(x(e,C)){var w=void 0;try{if(typeof e[C]!="function"){var L=Error((f||"React class")+": "+s+" type `"+C+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof e[C]+"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.");throw L.name="Invariant Violation",L}w=e[C](r,C,f,s,null,"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED")}catch(O){w=O}w&&!(w instanceof Error)&&(he(S),h("%s: type specification of %s `%s` is invalid; the type checker function must return `null` or an `Error` but returned a %s. You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument).",f||"React class",s,C,typeof w),he(null)),w instanceof Error&&!(w.message in Je)&&(Je[w.message]=!0,he(S),h("Failed %s type: %s",s,w.message),he(null))}}}var Bt=Array.isArray;function Ee(e){return Bt(e)}function Ht(e){{var r=typeof Symbol=="function"&&Symbol.toStringTag,s=r&&e[Symbol.toStringTag]||e.constructor.name||"Object";return s}}function Wt(e){try{return Xe(e),!1}catch{return!0}}function Xe(e){return""+e}function qe(e){if(Wt(e))return h("The provided key is an unsupported type %s. This value must be coerced to a string before before using it here.",Ht(e)),Xe(e)}var ie=g.ReactCurrentOwner,Yt={key:!0,ref:!0,__self:!0,__source:!0},$e,et,Re;Re={};function Ut(e){if(me.call(e,"ref")){var r=Object.getOwnPropertyDescriptor(e,"ref").get;if(r&&r.isReactWarning)return!1}return e.ref!==void 0}function zt(e){if(me.call(e,"key")){var r=Object.getOwnPropertyDescriptor(e,"key").get;if(r&&r.isReactWarning)return!1}return e.key!==void 0}function Gt(e,r){if(typeof e.ref=="string"&&ie.current&&r&&ie.current.stateNode!==r){var s=I(ie.current.type);Re[s]||(h('Component "%s" contains the string ref "%s". Support for string refs will be removed in a future major release. This case cannot be automatically converted to an arrow function. We ask you to manually fix this case by using useRef() or createRef() instead. Learn more about using refs safely here: https://reactjs.org/link/strict-mode-string-ref',I(ie.current.type),e.ref),Re[s]=!0)}}function Kt(e,r){{var s=function(){$e||($e=!0,h("%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",r))};s.isReactWarning=!0,Object.defineProperty(e,"key",{get:s,configurable:!0})}}function Jt(e,r){{var s=function(){et||(et=!0,h("%s: `ref` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",r))};s.isReactWarning=!0,Object.defineProperty(e,"ref",{get:s,configurable:!0})}}var Qt=function(e,r,s,f,S,x,C){var w={$$typeof:o,type:e,key:r,ref:s,props:C,_owner:x};return w._store={},Object.defineProperty(w._store,"validated",{configurable:!1,enumerable:!1,writable:!0,value:!1}),Object.defineProperty(w,"_self",{configurable:!1,enumerable:!1,writable:!1,value:f}),Object.defineProperty(w,"_source",{configurable:!1,enumerable:!1,writable:!1,value:S}),Object.freeze&&(Object.freeze(w.props),Object.freeze(w)),w};function Xt(e,r,s,f,S){{var x,C={},w=null,L=null;s!==void 0&&(qe(s),w=""+s),zt(r)&&(qe(r.key),w=""+r.key),Ut(r)&&(L=r.ref,Gt(r,S));for(x in r)me.call(r,x)&&!Yt.hasOwnProperty(x)&&(C[x]=r[x]);if(e&&e.defaultProps){var O=e.defaultProps;for(x in O)C[x]===void 0&&(C[x]=O[x])}if(w||L){var M=typeof e=="function"?e.displayName||e.name||"Unknown":e;w&&Kt(C,M),L&&Jt(C,M)}return Qt(e,w,L,S,f,ie.current,C)}}var Ae=g.ReactCurrentOwner,tt=g.ReactDebugCurrentFrame;function ee(e){if(e){var r=e._owner,s=fe(e.type,e._source,r?r.type:null);tt.setExtraStackFrame(s)}else tt.setExtraStackFrame(null)}var Se;Se=!1;function xe(e){return typeof e=="object"&&e!==null&&e.$$typeof===o}function rt(){{if(Ae.current){var e=I(Ae.current.type);if(e)return`

Check the render method of \``+e+"`."}return""}}function qt(e){{if(e!==void 0){var r=e.fileName.replace(/^.*[\\\/]/,""),s=e.lineNumber;return`

Check your code at `+r+":"+s+"."}return""}}var nt={};function $t(e){{var r=rt();if(!r){var s=typeof e=="string"?e:e.displayName||e.name;s&&(r=`

Check the top-level render call using <`+s+">.")}return r}}function at(e,r){{if(!e._store||e._store.validated||e.key!=null)return;e._store.validated=!0;var s=$t(r);if(nt[s])return;nt[s]=!0;var f="";e&&e._owner&&e._owner!==Ae.current&&(f=" It was passed a child from "+I(e._owner.type)+"."),ee(e),h('Each child in a list should have a unique "key" prop.%s%s See https://reactjs.org/link/warning-keys for more information.',s,f),ee(null)}}function st(e,r){{if(typeof e!="object")return;if(Ee(e))for(var s=0;s<e.length;s++){var f=e[s];xe(f)&&at(f,r)}else if(xe(e))e._store&&(e._store.validated=!0);else if(e){var S=H(e);if(typeof S=="function"&&S!==e.entries)for(var x=S.call(e),C;!(C=x.next()).done;)xe(C.value)&&at(C.value,r)}}}function er(e){{var r=e.type;if(r==null||typeof r=="string")return;var s;if(typeof r=="function")s=r.propTypes;else if(typeof r=="object"&&(r.$$typeof===u||r.$$typeof===i))s=r.propTypes;else return;if(s){var f=I(r);Vt(s,e.props,"prop",f,e)}else if(r.PropTypes!==void 0&&!Se){Se=!0;var S=I(r);h("Component %s declared `PropTypes` instead of `propTypes`. Did you misspell the property assignment?",S||"Unknown")}typeof r.getDefaultProps=="function"&&!r.getDefaultProps.isReactClassApproved&&h("getDefaultProps is only used on classic React.createClass definitions. Use a static property named `defaultProps` instead.")}}function tr(e){{for(var r=Object.keys(e.props),s=0;s<r.length;s++){var f=r[s];if(f!=="children"&&f!=="key"){ee(e),h("Invalid prop `%s` supplied to `React.Fragment`. React.Fragment can only have `key` and `children` props.",f),ee(null);break}}e.ref!==null&&(ee(e),h("Invalid attribute `ref` supplied to `React.Fragment`."),ee(null))}}function ot(e,r,s,f,S,x){{var C=q(e);if(!C){var w="";(e===void 0||typeof e=="object"&&e!==null&&Object.keys(e).length===0)&&(w+=" You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.");var L=qt(S);L?w+=L:w+=rt();var O;e===null?O="null":Ee(e)?O="array":e!==void 0&&e.$$typeof===o?(O="<"+(I(e.type)||"Unknown")+" />",w=" Did you accidentally export a JSX literal instead of a component?"):O=typeof e,h("React.jsx: type is invalid -- expected a string (for built-in components) or a class/function (for composite components) but got: %s.%s",O,w)}var M=Xt(e,r,s,S,x);if(M==null)return M;if(C){var U=r.children;if(U!==void 0)if(f)if(Ee(U)){for(var te=0;te<U.length;te++)st(U[te],e);Object.freeze&&Object.freeze(U)}else h("React.jsx: Static children should always be an array. You are likely explicitly calling React.jsxs or React.jsxDEV. Use the Babel transform instead.");else st(U,e)}return e===p?tr(M):er(M),M}}function rr(e,r,s){return ot(e,r,s,!0)}function nr(e,r,s){return ot(e,r,s,!1)}var ar=nr,sr=rr;ae.Fragment=p,ae.jsx=ar,ae.jsxs=sr}()),ae}(function(n){process.env.NODE_ENV==="production"?n.exports=ht():n.exports=pt()})(ce);const _e=ce.exports.Fragment,t=ce.exports.jsx,b=ce.exports.jsxs,Te=()=>t("svg",{stroke:"currentColor",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 50 50",children:t("path",{d:"M25,50a4.45,4.45,0,0,1-3.11-1.24L5.17,32.58a4.21,4.21,0,0,1-1-4.67,4.41,4.41,0,0,1,4.11-2.74h2.78a.44.44,0,0,0,.47-.4V5.42A5.49,5.49,0,0,1,17.08,0H32.92a5.49,5.49,0,0,1,5.55,5.42V24.77a.44.44,0,0,0,.47.4h2.78a4.41,4.41,0,0,1,4.11,2.74,4.21,4.21,0,0,1-1,4.67L28.11,48.76A4.45,4.45,0,0,1,25,50ZM8.28,28.26a1.29,1.29,0,0,0-1.25.8,1.14,1.14,0,0,0,.29,1.3L24,46.54a1.42,1.42,0,0,0,1.92,0L42.68,30.36a1.14,1.14,0,0,0,.29-1.3,1.3,1.3,0,0,0-1.25-.8H38.94a3.53,3.53,0,0,1-3.55-3.49V5.42a2.4,2.4,0,0,0-2.47-2.33H17.08a2.4,2.4,0,0,0-2.47,2.33V24.77a3.53,3.53,0,0,1-3.55,3.49Z"})}),Me=()=>b("svg",{stroke:"currentColor",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 50 50",children:[t("path",{d:"M24,44a2.09,2.09,0,0,1-4,.74,2.78,2.78,0,0,1-.16-1c0-1.34,0-2.68,0-4,0-.83-.18-1-1-1-1.54,0-3.08,0-4.62,0-.76,0-.9.15-.91.93,0,1.41,0,2.81,0,4.21A2.09,2.09,0,0,1,11.36,46a2.11,2.11,0,0,1-2.25-1.66,3.08,3.08,0,0,1-.1-.8q0-6.93,0-13.87a2.17,2.17,0,0,1,2.26-2.4,2,2,0,0,1,2,2c0,1.43,0,2.86,0,4.28,0,.82.1.92.89.92,1.59,0,3.18,0,4.76,0,.64,0,.9-.26.89-.9,0-1.4,0-2.8,0-4.21a2,2,0,0,1,2.27-2.11A2,2,0,0,1,24,29.47C24.07,31.65,24.06,41.53,24,44Z"}),t("path",{d:"M15,13.51c0,2.45,0,4.89,0,7.34a1.93,1.93,0,0,1-1.4,1.86A2,2,0,0,1,11.2,22a2.12,2.12,0,0,1-.32-1.07c0-1.36,0-2.72,0-4.08,0-1.08-.18-1.25-1.27-1.25H5.3c-1,0-1.08.11-1.08,1.11,0,1.34,0,2.67,0,4a1.91,1.91,0,0,1-2,2.1,2,2,0,0,1-2.2-2c0-.15,0-.31,0-.47C0,15.74,0,11.17,0,6.6A2.34,2.34,0,0,1,1.33,4.21,2,2,0,0,1,4.08,5.4a3.87,3.87,0,0,1,.13,1.07c0,1.34,0,2.68,0,4,0,.59.24.88.85.87,1.61,0,3.22,0,4.83,0a.81.81,0,0,0,.93-.9c0-1.31,0-2.62,0-3.94,0-1.56.78-2.52,2-2.51A2.25,2.25,0,0,1,15,6.51C15,8.85,15,13.51,15,13.51Z"}),t("path",{d:"M17.4,20.33c.26-.71.62-1.83,1.07-2.91,1.61-3.91,3.25-7.81,4.89-11.71A2.42,2.42,0,0,1,25.53,4a2.4,2.4,0,0,1,2.11,1.75c.81,2,1.69,4,2.52,6s1.59,3.89,2.39,5.84c.31.73.65,1.44,1,2.17a2.07,2.07,0,0,1-.86,2.75,2,2,0,0,1-2.82-.74c-.51-1.17-1.3-1.28-2.37-1.24-1.56.06-3.13,0-4.69,0a1.18,1.18,0,0,0-1.31.8,2,2,0,0,1-2.09,1.42A2,2,0,0,1,17.4,20.33Zm8.1-4h1c.65,0,.78-.18.55-.81-.36-1-.78-1.88-1.19-2.81a.56.56,0,0,0-.39-.29c-.13,0-.29.19-.36.34-.28.61-.54,1.24-.8,1.87C23.63,16.29,23.63,16.29,25.5,16.29Z"}),t("path",{d:"M42.79,43.89a2.09,2.09,0,0,1-1.72,2,2,2,0,0,1-2.33-1.19,1.51,1.51,0,0,0-1.72-1c-1.74,0-3.49,0-5.23,0a1.27,1.27,0,0,0-1.35.88A2.09,2.09,0,1,1,26.59,43Q29,37.22,31.37,31.46c.43-1,.88-2.08,1.34-3.11a1.83,1.83,0,0,1,1.87-1.1,1.8,1.8,0,0,1,1.83,1.13q1.37,3.29,2.76,6.56c1.07,2.51,2.17,5,3.23,7.53A3.07,3.07,0,0,1,42.79,43.89Zm-8.21-4.4h1.09c.57,0,.73-.27.52-.79C35.81,37.8,35.43,36.9,35,36c-.1-.2-.24-.53-.47-.52s-.36.32-.45.52c-.42.9-.79,1.82-1.19,2.72-.2.43-.05.67.38.72S34.58,39.48,34.58,39.49Z"}),t("path",{d:"M45.82,33.61c0-1.45,0-2.9,0-4.35a1.81,1.81,0,0,1,1.32-1.92,2,2,0,0,1,2.41.75A2.42,2.42,0,0,1,50,29.35c0,2.87,0,5.75,0,8.62a2,2,0,0,1-1.29,2,2,2,0,0,1-2.86-1.87,1.48,1.48,0,0,1,0-.21V33.61Z"}),t("path",{d:"M40.83,11.35c.83,0,1.67,0,2.51,0a2,2,0,0,1,2.07,2,2,2,0,0,1-1.93,2.19c-1.72.05-3.45.05-5.17,0a1.94,1.94,0,0,1-2-2.19,2,2,0,0,1,2.12-2C39.24,11.34,40,11.35,40.83,11.35Z"}),t("path",{d:"M49.92,43.94a2,2,0,0,1-2.05,2,2,2,0,0,1-2-2.12,1.91,1.91,0,0,1,2.09-2.06A1.94,1.94,0,0,1,49.92,43.94Z"})]}),vt=()=>t("svg",{stroke:"currentColor",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 50 50",children:t("path",{d:"M25.1,7.71a14.7,14.7,0,0,1,9.61-4.37c11.48-.44,18.66,10.75,13.7,21.34-2.85,6.09-7.52,10.69-12.57,14.91a103.8,103.8,0,0,1-9,6.54,3.38,3.38,0,0,1-2.93.35C15.28,41,7.29,34.86,2.22,25.7-.3,21.15-.84,16.36,1.46,11.52a14.44,14.44,0,0,1,22-5.1ZM47,18.19a28.27,28.27,0,0,0-.59-3.57,10.7,10.7,0,0,0-8.2-7.87,10.85,10.85,0,0,0-11.15,3.59c-1.84,2-2.08,2.06-3.93.13-.28-.29-.56-.59-.85-.86A10.71,10.71,0,0,0,11.43,6.89a10.9,10.9,0,0,0-7.92,8.18c-1,3.86.24,7.33,2.24,10.55C10.33,33,17.07,38.21,24.16,43a2.2,2.2,0,0,0,2-.13C32.39,38.69,38.25,34,42.8,28,45,25.08,46.69,22,47,18.19Z"})}),_t=()=>t("svg",{stroke:"currentColor",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 50 50",children:t("path",{d:"M25.1,7.71a14.7,14.7,0,0,1,9.61-4.37c11.48-.44,18.66,10.75,13.7,21.34-2.85,6.09-7.52,10.69-12.57,14.91a103.8,103.8,0,0,1-9,6.54,3.38,3.38,0,0,1-2.93.35C15.28,41,7.29,34.86,2.22,25.7-.3,21.15-.84,16.36,1.46,11.52a14.44,14.44,0,0,1,22-5.1Z"})}),gt=()=>b("svg",{stroke:"currentColor",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 50 50",children:[t("path",{d:"M0,19.32c.07-.55.15-1.09.22-1.64A13.58,13.58,0,0,1,13.62,6c7.59,0,15.18,0,22.76,0a13.62,13.62,0,0,1,13.39,11.4A32.62,32.62,0,0,1,50,21.79a21.65,21.65,0,0,1-.38,5.14,13.7,13.7,0,0,1-10.8,10.32,18.91,18.91,0,0,1-2.91.22c-7.07,0-14.13,0-21.2,0a3,3,0,0,0-1.17.26Q7,40.77.43,43.82L0,44Zm3,20c.25-.09.42-.14.57-.21,3-1.41,6.08-2.84,9.13-4.23a3.44,3.44,0,0,1,1.34-.3c7.28,0,14.56,0,21.85,0a14.55,14.55,0,0,0,2.18-.17A10.72,10.72,0,0,0,47,24c0-1.51,0-3,0-4.54a9.69,9.69,0,0,0-.24-2.08A10.74,10.74,0,0,0,36,8.85H14a13.53,13.53,0,0,0-1.9.16A10.71,10.71,0,0,0,3,19.59V39.35Z"}),t("path",{d:"M27.83,22.27a2.82,2.82,0,1,1-5.63,0,2.82,2.82,0,1,1,5.63,0Z"}),t("path",{d:"M17.56,22.3a2.82,2.82,0,1,1-5.64,0,2.82,2.82,0,1,1,5.64,0Z"}),t("path",{d:"M32.47,22.28a2.82,2.82,0,1,1,2.84,2.86A2.84,2.84,0,0,1,32.47,22.28Z"})]}),De=()=>t("svg",{stroke:"currentColor",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 50 50",children:t("path",{d:"M24.8,10.39c0,1.79,0,3.58,0,5.36,0,.72.24,1,.94,1.06,2.82.33,5.65.58,8.43,1.12a18.65,18.65,0,0,1,10.06,5.2,18.77,18.77,0,0,1,4.64,9.15c1,4.06,1,8.2,1.14,12.32,0,1.32-.54,2.07-1.53,2a2,2,0,0,1-1.28-.7c-.6-.9-1-1.91-1.57-2.87a16.34,16.34,0,0,0-10.52-8.4A38.8,38.8,0,0,0,26,33.25c-1,0-1.24.31-1.23,1.25,0,3.37,0,6.75,0,10.12,0,.8-.07,1.58-.93,1.9a1.87,1.87,0,0,1-2-.64Q14,38.56,6.05,31.28c-1.79-1.66-3.6-3.3-5.4-5a1.67,1.67,0,0,1,0-2.66l14.5-13.39C17.45,8.16,19.74,6.07,22,4a1.68,1.68,0,0,1,1.9-.44,1.54,1.54,0,0,1,.89,1.62C24.79,6.89,24.8,8.64,24.8,10.39Zm21.86,28.3a3.42,3.42,0,0,0,.07-.82c-.31-1.95-.51-3.93-1-5.84a14.14,14.14,0,0,0-8.8-10.15c-4.16-1.68-8.53-2-12.93-2.09-1.86-.05-2.24-.41-2.24-2.3q0-3.87,0-7.74c0-.34-.05-.68-.1-1.31L3.73,25,21.46,41.38l.25-.15c0-.35.06-.7.06-1,0-2.68,0-5.36,0-8,0-1.41.5-1.91,1.91-1.91a47.9,47.9,0,0,1,10.34,1c4.7,1,8.87,3,12,6.85A6.51,6.51,0,0,0,46.66,38.69Z"})}),bt=()=>b("svg",{stroke:"currentColor",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 50 50",children:[t("path",{d:"M19.63,25.05A5.38,5.38,0,1,1,30.38,25a5.38,5.38,0,1,1-10.75.07Z"}),t("path",{d:"M39.23,25A5.39,5.39,0,1,1,50,25,5.39,5.39,0,1,1,39.23,25Z"}),t("path",{d:"M10.76,25a5.34,5.34,0,0,1-5.35,5.4A5.35,5.35,0,0,1,0,25a5.38,5.38,0,1,1,10.76,0Z"})]}),wt=()=>b("svg",{stroke:"currentColor",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 50 50",children:[t("path",{d:"M30.85,36.71a12.08,12.08,0,0,1,0-24.16c.35,0,.69,0,1,0V0a6.18,6.18,0,0,0-3.7,1.12C26.82,2.31,23.87,9,19.24,13.29c-6.44,6-9.67,6.39-11.12,8a4.63,4.63,0,0,0-1.55,3.61v.12a4.63,4.63,0,0,0,1.55,3.61c1.45,1.65,4.68,2,11.12,8,4.63,4.32,7.58,11,8.94,12.17A6.18,6.18,0,0,0,31.88,50V36.67C31.54,36.69,31.2,36.71,30.85,36.71Z"}),t("path",{d:"M43,34.92l-4.59-4.85a8.72,8.72,0,0,0-13-11.58,8.73,8.73,0,0,0,5.76,15.06h.25a8.69,8.69,0,0,0,4.86-1.48l4.59,4.85a1.44,1.44,0,0,0,1,.45A1.44,1.44,0,0,0,43,34.92ZM31.31,30.65A5.83,5.83,0,0,1,31.47,19h.16a5.83,5.83,0,0,1-.32,11.65Z"})]}),ge=n=>{if(!n)return"-";const o=n.substring(0,5),a=n.substring(n.length-5);return o+"-"+a},le=(n,o=!1)=>{if(!n)return"";const a=n.split(":");return o?ge(a[4]):a[4]},je=n=>n?.profile?.username||ge(le(n?.did)),Ze=n=>n?.metadata?.ensName||ge(le(n?.did)),Ie=/\B@[a-z0-9_.⍙-]+/gi,yt=n=>{if(!n)return"";let{body:o}=n;const{mentions:a}=n,p=n.body.toString().match(Ie);p&&a&&Array.isArray(a)&&p.forEach(y=>{a.find(_=>_.username===y)!==void 0&&(o=o.replace(y,`<span class="highlighted" contenteditable="false">${y}</span>`))});const d=new RegExp(String.fromCharCode(160),"g");return o=o.replace(d," "),o},Ct=(n,o=!1,a=280,p="https://app.orbis.club/profile/")=>{if(!n||!n.body)return null;let d=n.body;if(o&&d.length>a)return d=d.substring(0,a),d+"...";d=re.default(d,"<br>",function(u,l){return t("br",{},u+l)}),d=re.default(d,`
`,function(u,l){return t("br",{},u+l)}),d=re.default(d,/(https?:\/\/(?:www\.|(?!www))[a-zA-Z0-9][a-zA-Z0-9-]+[a-zA-Z0-9]\.[^\s]{2,}|www\.[a-zA-Z0-9][a-zA-Z0-9-]+[a-zA-Z0-9]\.[^\s]{2,}|https?:\/\/(?:www\.|(?!www))[a-zA-Z0-9]+\.[^\s]{2,}|www\.[a-zA-Z0-9]+\.[^\s]{2,})/g,function(u,l){return t("a",{href:u,rel:"noreferrer",target:"_blank",title:u,className:"highlighted",children:u},u+l)});const{mentions:y}=n,A=n.body.toString().match(Ie);A&&y&&Array.isArray(y)&&A.forEach(u=>{const l=y.find(v=>v.username===u);l!==void 0&&(d=re.default(d,u,(v,i)=>l.did?t("a",{href:`${p}${l.did}`,target:"_blank",rel:"noreferrer",children:l.username},v+i):t("span",{className:"highlighted",children:l.username},v+i)))});const _=new RegExp(String.fromCharCode(160),"g");return d=re.default(d,_,function(u){return" "+u}),d},Le=n=>{const o=pe.DateTime.now(),a=pe.DateTime.fromSeconds(n),p=o.diff(a,["days"]);let d=a.toRelative();return p.get("days")>7&&(d=a.toLocaleString(pe.DateTime.DATETIME_MED)),d},Et=n=>new Promise(o=>setTimeout(o,n)),Rt=(n,o)=>{let a;return(...p)=>new Promise(d=>{a&&clearTimeout(a),a=setTimeout(()=>d(n(...p)),o)})},At={like:t(vt,{}),likeActive:t(_t,{}),haha:t(Me,{}),hahaActive:t(Me,{}),downvote:t(Te,{}),downvoteActive:t(Te,{}),replyto:t(De,{}),replytoActive:t(De,{}),comment:t(gt,{})},Fe=c.createContext({}),St=({children:n,customIcons:o=null,options:a={},profileUrl:p="https://app.orbis.club/profile/",showPoweredByOrbis:d=!1})=>{const y=new ct.Orbis(a),A=o||At,[_,u]=c.useState(!1),[l,v]=c.useState(null),[i,E]=c.useState(!1),T=async()=>{console.log("connecting",_);const g=await y.connect_v2({provider:_,chain:"ethereum"});if(console.log(g),g.status!==200)await Et(2e3),await T();else{const{data:h}=await y.getProfile(g.did);v(h)}},j=()=>{y.logout().status===200&&v(null)},B=async()=>{const g=await y.connectLit(_);return E(g.status===200),g},H=async(g=!1)=>{const h=await y.isConnected();if(h.status===200){const{data:P}=await y.getProfile(h.did);E(h?.details?.hasLit),v(P)}else g&&await T()};return t(Fe.Provider,{value:{orbis:y,icons:A,provider:_,profile:l,profileUrl:p,hasLit:i,showPoweredByOrbis:d,setProvider:u,connectOrbis:T,connectLit:B,checkOrbisConnection:H,disconnectOrbis:j},children:n})},se=()=>c.useContext(Fe),Ve=(n,o)=>{const a=c.useRef(()=>{});c.useEffect(()=>{a.current=n}),c.useEffect(()=>{if(o!==null){const p=setInterval(()=>a.current(),o||0);return()=>clearInterval(p)}},[o])},Be=({details:n})=>{const o=le(n?.did)||"";return t("div",{className:"avatar",children:t("img",{src:n?.profile?.pfp||mt.default(o),className:"w-full h-full object-cover object-center"})})},be=({context:n,editPost:o,replyTo:a,placeholder:p="Share your post here...",enterToSend:d=!0,popoverPosition:y="top",cancelReplyTo:A,cancelEdit:_,callback:u})=>{const{orbis:l,profile:v,connectOrbis:i}=se(),E=c.useRef(null),[T,j]=c.useState(0),[B,H]=c.useState(null),[g,h]=c.useState(!1),[P,k]=c.useState(""),[z,F]=c.useState([]),[K,Y]=c.useState([]),W=()=>{const m=document.getSelection();m&&(j(m.focusOffset),H(m.focusNode))},q=()=>{if(!E.current)return;E.current.focus();const m=document.getSelection();m&&m.collapse(B,T)},oe=Rt(async()=>{h(!0),F([]);const{data:m,error:N}=await l.getProfilesByUsername(P);m?F(m):console.log(N),h(!1)},1e3),$=m=>{q();const N=m?.details?.profile?.username?.trim();K?.find(G=>N===G?.username)||Y([...K,{username:"@"+N,did:m.did}]);const V='<span href="/profile/'+m.did+'" class="text-lime-700" contenteditable="false" data-did="'+m.did+'">@'+N+"</span><span> </span>";for(let G=0;G<P.length+1;G++)document.execCommand("delete",!1,""),G==P.length&&document.execCommand("insertHTML",!1,V);setTimeout(()=>{k(""),E.current.focus(),E.current.innerHTML.replace(/&nbsp;$/," ")},100)},I=async()=>{if(!l||!v)return!1;const m=E.current.innerText,N=K.filter(D=>m.includes(D.username));if(o){const D={...o.content,body:m,mentions:N};u&&u(D)}else{const D={body:m,context:n,master:a?a.master||a.stream_id:void 0,reply_to:a?a.stream_id:void 0,mentions:N||void 0},V=Math.floor(Date.now()/1e3),G={content:D,context:n,creator:v.did,creator_details:{did:v.did,profile:v.details?.profile,metadata:v.details?.metadata},stream_id:"new_post-"+V,timestamp:V,master:a?a.master||a.stream_id:null,reply_to:a?a.stream_id:null,reply_to_creator_details:a?a.creator_details:null,reply_to_details:a?a.content:null,count_commits:1,count_likes:0,count_haha:0,count_downvotes:0,count_replies:0,type:a?"reply":null};console.log(G),u&&u(G),E.current.innerText=""}},R=m=>{!m.key||d&&m.key==="Enter"&&!m.shiftKey&&(m.preventDefault(),I())};return c.useEffect(()=>{if(!E.current)return;E.current.innerText||(k(""),h(!1),F([]));let N="";for(let D=T;D>0;D--){const V=B?.textContent?.substring(D-1,D)?.trim();if(N=V+N,!V){k(""),h(!1),F([]);return}if(V==="@"){k(N.replace("@",""));return}h(!1),k("")}},[T,B]),c.useEffect(()=>{P?oe():(h(!1),F([]))},[P]),c.useEffect(()=>{a&&E.current.focus()},[a]),c.useEffect(()=>{if(o){let{body:m}=o.content;const{mentions:N}=o.content;N?.length&&(Y(N),m=yt(o.content)),E.current.innerHTML=m,setTimeout(()=>{if(E.current.focus(),typeof window.getSelection<"u"&&typeof document.createRange<"u"){const D=document.createRange();D.selectNodeContents(E.current),D.collapse(!1);const V=window.getSelection();V?.removeAllRanges(),V?.addRange(D)}},100)}},[o]),v?b("div",{className:"postbox",children:[P&&t("div",{className:`mentions ${y==="top"?"mentions--top":"mentions--bottom"}`,children:t("div",{className:"mentions__scrollable",children:g?t("div",{className:"mentions__loading",children:"Loading..."}):z.map(m=>b("div",{className:"mentions__account",onClick:()=>$(m),children:[t("div",{className:"mentions__account__avatar",children:t(Be,{details:m?.details})}),b("div",{className:"mentions__account__name",children:[t("span",{children:je(m?.details)}),t("span",{className:"badge",children:Ze(m?.details)})]})]},m.did))})}),a&&b("div",{className:"replyto",children:[b("div",{className:"replyto__details",children:["Replying to"," ",t("strong",{children:a?.creator_details?.profile?.username||a?.creator_details?.metadata?.ensName||le(a?.creator_details?.did,!0)}),t("br",{}),a.content?.body]}),A&&t("button",{className:"replyto__cancel",onClick:()=>A&&A(),children:"\xD7"})]}),t("div",{ref:E,className:"postbox__contenteditable",contentEditable:!0,"data-placeholder":p,onKeyDown:R,onKeyUp:W,onMouseUp:W}),o&&t(_e,{children:b("div",{className:"postbox__editmenu",children:[t("button",{onClick:()=>_&&_(!1),children:"Cancel"})," ","\u2022 Enter to ",t("button",{onClick:I,children:"Save"})]})}),!d&&t("button",{className:"send",onClick:I,children:"Send"})]}):t("button",{className:"gradient-button",onClick:i,children:"Connect to Ceramic"})},xt=({children:n,onAction:o})=>b(X.Root,{children:[t(X.Trigger,{asChild:!0,children:n}),t(X.Portal,{children:b(X.Content,{className:"post__popover",side:"top",sideOffset:5,children:[t(X.Item,{className:"edit",onSelect:()=>o("edit"),children:"Edit Post"}),t(X.Item,{className:"delete",onSelect:()=>o("delete"),children:"Delete Post"}),t(X.Arrow,{className:"post__popover__arrow"})]})})]}),Pt=({open:n,setOpen:o,confirm:a})=>t(Q.Root,{open:n,onOpenChange:o,children:b(Q.Portal,{children:[t(Q.Overlay,{className:"post__deleteconfirmation__overlay"}),b(Q.Content,{className:"post__deleteconfirmation__content",children:[t(Q.Title,{className:"post__deleteconfirmation__title",children:"Are you sure you want to delete this post?"}),t(Q.Description,{className:"post__deleteconfirmation__description",children:"If you ask for deletion your post might be removed from the Ceramic nodes hosting it."}),b("div",{className:"post__deleteconfirmation__actions",children:[t(Q.Cancel,{asChild:!0,children:t("button",{className:"cancel",children:"Cancel"})}),t(Q.Action,{asChild:!0,children:t("button",{className:"delete",onClick:a,children:"Delete"})})]})]})]})}),He=({post:n,replyTo:o=null,onClickReply:a})=>{const d=c.useRef(),{orbis:y,profile:A,icons:_,profileUrl:u}=se(),[l,v]=c.useState(null),[i,E]=c.useState({...n}),[T,j]=c.useState(i.content.body.length>=280),[B,H]=c.useState(!1),[g,h]=c.useState(0),[P,k]=c.useState(!1),[z,F]=c.useState(null),K=async()=>{if(!y||!A)return;const{data:R}=await y.getReaction(i.stream_id,A.did);R&&v(R.type)},Y=async()=>{const{data:R,error:m}=await y.getPost(n.stream_id);m&&console.error(m),R&&E(R)},W=async R=>{if(R===l)return;v(R);const m={like:"count_likes",haha:"count_haha",downvote:"count_downvotes"},N={...i};l&&(N[m[l]]-=1),N[m[R]]+=1,E({...N}),(await y.react(i.stream_id,R)).status!==200&&E({...i})},q=R=>{R==="edit"?H(!0):R==="delete"&&k(!0)},oe=R=>{E({...i,content:R,count_commits:i.count_commits+1}),H(!1)},$=async()=>{console.log(`deleting ${i.stream_id}`),h(1),setTimeout(()=>{h(2)},2e3)},I=c.useMemo(()=>{const R=[i.stream_id];return(i.stream_id.startsWith("new_post-")||g==1)&&R.push("post--pulse"),g==2&&R.push("post--deleted"),R.join(" ")},[i,g]);return Ve(()=>{if(i){const R=Le(i.timestamp);F(R)}},i?6e4:null),c.useEffect(()=>{n&&Y()},[n]),c.useEffect(()=>{i&&A&&K()},[i,A]),b("div",{ref:d,className:`post ${I}`,children:[t("div",{className:"post__avatar",children:t(Be,{details:i?.creator_details})}),b("div",{className:"post__content",children:[b("div",{className:"post__info",children:[t("a",{href:`${u}${i.creator_details?.did}`,target:"_blank",rel:"noreferrer",children:je(i.creator_details)}),t("span",{className:"badge",children:Ze(i.creator_details)}),b("span",{className:"post__time",children:["\u2022 ",z||Le(i.timestamp)]})]}),b("div",{className:"post__body content",children:[g==2?"This post is deleted":B?t(be,{context:i.context,editPost:i,cancelEdit:R=>H(R),callback:oe}):t(_e,{children:Ct(i.content,T,280,u)}),i.count_commits>1&&g!=2&&t("span",{className:"post__edited",children:"(edited)"})]}),i?.indexing_metadata?.urlMetadata&&b("div",{className:"post__metadata",children:[i?.indexing_metadata?.urlMetadata?.image&&t("a",{href:i?.indexing_metadata?.urlMetadata?.url,className:"post__metadata__image",target:"_blank",rel:"noreferrer",children:t("img",{src:i?.indexing_metadata?.urlMetadata?.image})}),b("div",{className:"post__metadata__content",children:[t("small",{children:i?.indexing_metadata?.urlMetadata?.source}),t("h1",{children:t("a",{href:i?.indexing_metadata?.urlMetadata?.url,target:"_blank",rel:"noreferrer",children:i?.indexing_metadata?.urlMetadata?.title})}),t("p",{children:i?.indexing_metadata?.urlMetadata?.description})]})]}),T&&t("button",{className:"gradient-button",onClick:()=>j(!1),children:"View more"}),g!=2&&b("div",{className:"post__menu",children:[b("div",{className:"post__reactions",children:[t("button",{className:`${o?.stream_id===i.stream_id?"active":""}`,onClick:()=>a&&a(i),title:"Reply",children:t("span",{className:"icon",children:_.replyto})}),b("button",{className:l==="like"?"active":"",onClick:()=>W("like"),disabled:l==="like",title:"Like",children:[t("span",{className:"icon",children:l==="like"?_.likeActive:_.like}),t("span",{children:i.count_likes})]}),b("button",{className:l==="haha"?"active":"",onClick:()=>W("haha"),disabled:l==="haha",title:"HAHA",children:[t("span",{className:"icon",children:l==="haha"?_.hahaActive:_.haha}),t("span",{children:i.count_haha})]}),b("button",{className:l==="downvote"?"active":"",onClick:()=>W("downvote"),disabled:l==="downvote",title:"Downvote",children:[t("span",{className:"icon",children:l==="downvote"?_.downvoteActive:_.downvote}),t("span",{children:i.count_downvotes})]})]}),i.stream_id!=="new_post"&&b("div",{className:"post__actions",children:[n?.creator_details?.did===A?.did&&t(xt,{onAction:q,children:t("button",{children:t("span",{className:"icon",children:t(bt,{})})})}),t("a",{href:`https://cerscan.com/mainnet/stream/${i.stream_id}`,className:"cerscan-proof",target:"_blank",rel:"noreferrer",title:"View on Cerscan",children:t("span",{className:"icon",children:t(wt,{})})})]})]})]}),t(Pt,{open:P,setOpen:k,confirm:$})]})},We=({items:n,replies:o,replyTo:a=null,onClickReply:p})=>t(_e,{children:n.map(d=>b("div",{className:"replies",children:[t(He,{post:d,replyTo:a,onClickReply:()=>p(d)}),o[d.stream_id]!==void 0&&t(We,{items:o[d.stream_id],replies:o,replyTo:a,onClickReply:p})]},d.stream_id))}),kt=({context:n,master:o,innerPostbox:a,replyTo:p,onClickReply:d,onNewPost:y})=>{const{orbis:A}=se(),_=c.useRef(null),[u,l]=c.useState([]),[v,i]=c.useState(0),[E,T]=c.useState(!1),j=c.useMemo(()=>u.reduce((h,P)=>(h[P.reply_to]=[...h[P.reply_to]||[],P],h),{}),[u]),B=async()=>{if(!A||!n||!o||E)return;T(!0);const{data:g,error:h}=await A.getPosts({context:n,master:o.stream_id},v);g&&(g.reverse(),l([...u,...g]),i(P=>P+1)),h&&console.error(h),T(!1)},H=g=>{const h=[...u,g];l(h),d(null),g.stream_id.startsWith("new_post-")&&setTimeout(()=>{const P=_.current?.querySelector(`.${g.stream_id}`);y(P)},100)};return c.useEffect(()=>{n&&o&&B()},[n,o]),b("div",{ref:_,children:[j[o.stream_id]!==void 0&&t(We,{items:j[o.stream_id],replies:j,replyTo:p,onClickReply:d}),p&&t("div",{ref:a,children:t(be,{context:n,replyTo:p,placeholder:"Reply this comment...",cancelReplyTo:()=>d(null),callback:H})})]})},Nt=({post:n})=>{const o=c.useRef(null),a=c.useRef(null),[p,d]=c.useState(!1),[y,A]=c.useState(null),[_,u]=c.useState(null);return c.useEffect(()=>{if(_!==null&&a.current){const l=a.current?.closest(".comments__posts");if(!l)return;const v=l.offsetHeight/2;_==="masterPost"&&a.current?setTimeout(()=>{l.scrollTo({top:a.current?.offsetTop-l.offsetTop,behavior:"smooth"})},500):_==="postbox"&&o.current?setTimeout(()=>{l.scrollTo({top:o.current?.offsetTop-v,behavior:"smooth"})},500):setTimeout(()=>{const i=_;l.scrollTo({top:i.offsetTop-v,behavior:"smooth"})},500)}return()=>{setTimeout(()=>{u(null)},500)}},[y,p,_]),c.useEffect(()=>{p||A(null)},[p]),b("div",{ref:a,className:"comments__post",children:[t(He,{post:n,replyTo:y,onClickReply:()=>{A(n),d(!0),u("postbox")}}),n.count_replies!==void 0&&n.count_replies>0&&b("button",{className:`comments__post__toggle-replies ${p?"opened":""}`,onClick:()=>{u(p?null:"masterPost"),d(l=>!l)},children:[p?"Hide":"Show"," replies"]}),p&&t(kt,{context:n.context,master:n,replyTo:y,innerPostbox:o,onClickReply:l=>{A(l),u("postbox")},onNewPost:l=>u(l)})]})},Ot=({onClick:n,text:o="Load older posts"})=>t("button",{className:"gradient-button",onClick:n,children:o}),Tt=()=>t("div",{className:"loading",children:"Loading..."}),Mt=()=>t("div",{className:"powered-by-orbis",children:t("a",{href:"https://orbis.club",target:"_blank",rel:"noreferrer",children:b("svg",{stroke:"currentColor",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 300 42.58",children:[t("path",{d:"M2.12,42.48H0V20.17a19.39,19.39,0,0,1,2.41-.61,19.1,19.1,0,0,1,3.72-.3,9.12,9.12,0,0,1,3.38.6,7.32,7.32,0,0,1,2.6,1.75,7.84,7.84,0,0,1,1.7,2.77,10.66,10.66,0,0,1,.6,3.69,12,12,0,0,1-.5,3.53,7.9,7.9,0,0,1-1.49,2.78A6.92,6.92,0,0,1,10,36.19a7.79,7.79,0,0,1-3.25.65,7.82,7.82,0,0,1-2.88-.48,7.42,7.42,0,0,1-1.78-.89Zm0-9.07a6.14,6.14,0,0,0,.73.49,6.59,6.59,0,0,0,1,.49,9,9,0,0,0,1.27.38,7.48,7.48,0,0,0,1.44.14,5.85,5.85,0,0,0,2.62-.53,4.53,4.53,0,0,0,1.71-1.47,6.22,6.22,0,0,0,.95-2.19,11.33,11.33,0,0,0,.29-2.65A7.21,7.21,0,0,0,10.5,23a5.77,5.77,0,0,0-4.4-1.78,17,17,0,0,0-2.53.15,9.61,9.61,0,0,0-1.45.31Z"}),t("path",{d:"M33.39,28a10.87,10.87,0,0,1-.57,3.62,7.94,7.94,0,0,1-1.6,2.77,7,7,0,0,1-2.43,1.78,7.8,7.8,0,0,1-6.19,0,7,7,0,0,1-2.43-1.78,7.94,7.94,0,0,1-1.6-2.77,11.78,11.78,0,0,1,0-7.24,8.32,8.32,0,0,1,1.6-2.79,7.18,7.18,0,0,1,2.43-1.79,7.92,7.92,0,0,1,6.19,0,7.18,7.18,0,0,1,2.43,1.79,8.32,8.32,0,0,1,1.6,2.79A11,11,0,0,1,33.39,28Zm-2.25,0a7.92,7.92,0,0,0-1.47-5,4.74,4.74,0,0,0-4-1.88,4.76,4.76,0,0,0-4,1.88,7.92,7.92,0,0,0-1.47,5,7.85,7.85,0,0,0,1.47,5,4.8,4.8,0,0,0,4,1.86,4.78,4.78,0,0,0,4-1.86A7.85,7.85,0,0,0,31.14,28Z"}),t("path",{d:"M48.87,19.59c.19,1.08.45,2.24.76,3.47s.66,2.48,1,3.75.78,2.53,1.21,3.76.85,2.41,1.29,3.5c.37-.83.76-1.83,1.18-3s.82-2.43,1.24-3.74.8-2.64,1.16-4,.66-2.59.9-3.74h2.09c-.79,3.31-1.64,6.33-2.57,9.07s-2,5.33-3.06,7.79h-2c-.32-.77-.67-1.63-1-2.57s-.74-2-1.12-3-.75-2.21-1.11-3.39-.7-2.4-1-3.63c-.32,1.24-.66,2.45-1,3.64s-.73,2.31-1.11,3.39-.75,2.09-1.11,3-.7,1.8-1,2.56h-2a81.16,81.16,0,0,1-3.06-7.8c-.92-2.74-1.78-5.76-2.56-9.06h2.25c.24,1.15.54,2.39.9,3.73s.75,2.66,1.17,4,.83,2.56,1.26,3.73.82,2.18,1.19,3c.42-1.08.83-2.24,1.25-3.48s.81-2.49,1.18-3.76.71-2.5,1-3.73.61-2.39.87-3.47Z"}),t("path",{d:"M62.25,28a10.73,10.73,0,0,1,.63-3.86,8.55,8.55,0,0,1,1.67-2.76,6.45,6.45,0,0,1,2.35-1.65,7.28,7.28,0,0,1,2.72-.53,6.36,6.36,0,0,1,4.94,2c1.23,1.35,1.84,3.42,1.84,6.23,0,.17,0,.34,0,.52s0,.34,0,.49H64.5A7.42,7.42,0,0,0,66,33.22a5.73,5.73,0,0,0,4.57,1.66,9.17,9.17,0,0,0,2.74-.33A10.6,10.6,0,0,0,74.8,34l.39,1.83a8.9,8.9,0,0,1-1.71.62,11.15,11.15,0,0,1-3,.35,9.7,9.7,0,0,1-3.78-.65,6.82,6.82,0,0,1-2.58-1.82,7.31,7.31,0,0,1-1.46-2.79A12.8,12.8,0,0,1,62.25,28Zm12-1.34A6.77,6.77,0,0,0,73,22.55a4,4,0,0,0-3.33-1.46,4.5,4.5,0,0,0-2,.45,5.31,5.31,0,0,0-1.56,1.23,5.61,5.61,0,0,0-1,1.77,7.55,7.55,0,0,0-.44,2.12Z"}),t("path",{d:"M86.87,19.26a12.37,12.37,0,0,1,2,.16,6,6,0,0,1,1.29.33l-.42,1.83a4.77,4.77,0,0,0-1.06-.28,12,12,0,0,0-2.11-.15,10,10,0,0,0-2.2.2,6.84,6.84,0,0,0-1.09.32V36.45H81.13V20.37a15.3,15.3,0,0,1,2.25-.73A14,14,0,0,1,86.87,19.26Z"}),t("path",{d:"M92.31,28A10.72,10.72,0,0,1,93,24.14a8.53,8.53,0,0,1,1.66-2.76A6.62,6.62,0,0,1,97,19.73a7.32,7.32,0,0,1,2.72-.53,6.33,6.33,0,0,1,4.94,2c1.23,1.35,1.85,3.42,1.85,6.23,0,.17,0,.34,0,.52s0,.34,0,.49H94.56a7.48,7.48,0,0,0,1.54,4.76,5.7,5.7,0,0,0,4.56,1.66,9.12,9.12,0,0,0,2.74-.33,11.41,11.41,0,0,0,1.47-.55l.39,1.83a9.48,9.48,0,0,1-1.71.62,11.2,11.2,0,0,1-3,.35,9.78,9.78,0,0,1-3.79-.65,6.71,6.71,0,0,1-2.57-1.82,7.19,7.19,0,0,1-1.47-2.79A13.19,13.19,0,0,1,92.31,28Zm12-1.34A6.64,6.64,0,0,0,103,22.55a4,4,0,0,0-3.32-1.46,4.5,4.5,0,0,0-2,.45,5.35,5.35,0,0,0-1.57,1.23,5.78,5.78,0,0,0-1,1.77,7.22,7.22,0,0,0-.44,2.12Z"}),t("path",{d:"M124.6,35.92a17.79,17.79,0,0,1-2.42.62,18.92,18.92,0,0,1-3.71.3,8.92,8.92,0,0,1-3.38-.61,7.3,7.3,0,0,1-2.61-1.74,7.82,7.82,0,0,1-1.69-2.77,10.42,10.42,0,0,1-.61-3.69,11.74,11.74,0,0,1,.51-3.54,8.14,8.14,0,0,1,1.48-2.78,6.68,6.68,0,0,1,2.4-1.83,7.78,7.78,0,0,1,3.24-.65,8.14,8.14,0,0,1,2.89.47,7.76,7.76,0,0,1,1.78.9V11.53l2.12-.39Zm-2.12-13.27a8.64,8.64,0,0,0-.74-.49,8.14,8.14,0,0,0-1-.49,9.15,9.15,0,0,0-1.28-.37,6.6,6.6,0,0,0-1.43-.15,5.58,5.58,0,0,0-2.62.56,4.76,4.76,0,0,0-1.72,1.48,6.24,6.24,0,0,0-.94,2.18,11.47,11.47,0,0,0-.3,2.66,7.21,7.21,0,0,0,1.67,5.11,5.75,5.75,0,0,0,4.4,1.77,19,19,0,0,0,2.53-.14,9.61,9.61,0,0,0,1.45-.31Z"}),t("path",{d:"M148.16,20.6a7.76,7.76,0,0,1,1.78-.9,8.1,8.1,0,0,1,2.89-.47,7.78,7.78,0,0,1,3.24.65,6.77,6.77,0,0,1,2.4,1.83A8.14,8.14,0,0,1,160,24.49a11.74,11.74,0,0,1,.51,3.54,10.42,10.42,0,0,1-.61,3.69,7.82,7.82,0,0,1-1.69,2.77,7.3,7.3,0,0,1-2.61,1.74,8.92,8.92,0,0,1-3.38.61,18.92,18.92,0,0,1-3.71-.3,17.79,17.79,0,0,1-2.42-.62V11.53l2.12-.39Zm0,13.86a9.61,9.61,0,0,0,1.45.31,18.88,18.88,0,0,0,2.53.14,5.75,5.75,0,0,0,4.4-1.77A7.21,7.21,0,0,0,158.21,28a11.47,11.47,0,0,0-.3-2.66,6.24,6.24,0,0,0-.94-2.18,4.81,4.81,0,0,0-1.71-1.48,5.65,5.65,0,0,0-2.63-.56,6.6,6.6,0,0,0-1.43.15,8.78,8.78,0,0,0-1.28.37,8.14,8.14,0,0,0-1,.49,8.64,8.64,0,0,0-.74.49Z"}),t("path",{d:"M169.65,36.8c-.71-1.32-1.39-2.71-2.06-4.14s-1.29-2.88-1.86-4.35-1.11-2.94-1.59-4.4-.89-2.91-1.24-4.32h2.25c.24,1,.54,2.17.91,3.37s.79,2.45,1.26,3.74,1,2.6,1.54,3.94,1.18,2.68,1.85,4c.49-1.34.91-2.61,1.29-3.81s.72-2.38,1-3.56.62-2.4.92-3.64.6-2.58.91-4H177q-1.06,4.72-2.39,9.2A78.17,78.17,0,0,1,171.71,37a18,18,0,0,1-1.28,2.53A7.45,7.45,0,0,1,169,41.24a5.21,5.21,0,0,1-1.87,1,8.46,8.46,0,0,1-2.5.33,5.27,5.27,0,0,1-1.49-.2,5.39,5.39,0,0,1-.84-.29l.43-1.76a3.35,3.35,0,0,0,.73.27,4.36,4.36,0,0,0,1.26.18,6.45,6.45,0,0,0,1.65-.19,3.59,3.59,0,0,0,1.32-.67,4.93,4.93,0,0,0,1.07-1.22A10.93,10.93,0,0,0,169.65,36.8Z"}),t("path",{d:"M216.92,24.48a16.13,16.13,0,0,1-.85,5.39A12.12,12.12,0,0,1,213.64,34a10.77,10.77,0,0,1-3.79,2.67,12.17,12.17,0,0,1-4.88,1,12,12,0,0,1-4.86-1A10.88,10.88,0,0,1,196.34,34a12.32,12.32,0,0,1-2.45-4.14,15.63,15.63,0,0,1-.88-5.39,15.4,15.4,0,0,1,.88-5.35A11.91,11.91,0,0,1,196.37,15a10.83,10.83,0,0,1,3.78-2.65,13,13,0,0,1,9.65,0A10.6,10.6,0,0,1,213.59,15,12.16,12.16,0,0,1,216,19.13,15.4,15.4,0,0,1,216.92,24.48Zm-5.9,0a9.76,9.76,0,0,0-1.6-5.88,5.66,5.66,0,0,0-8.91,0,9.76,9.76,0,0,0-1.59,5.88,10,10,0,0,0,1.59,6,5.63,5.63,0,0,0,8.91,0A10,10,0,0,0,211,24.48Z"}),t("path",{d:"M237.07,17.24c-.47-.15-1.13-.32-2-.5a15,15,0,0,0-2.93-.26,12.38,12.38,0,0,0-2,.19,11.9,11.9,0,0,0-1.5.34V37h-5.76V13.24a31.28,31.28,0,0,1,4.17-1.16,25.55,25.55,0,0,1,5.54-.55c.39,0,.83,0,1.34.07s1,.11,1.52.19,1,.17,1.48.29a10.7,10.7,0,0,1,1.14.31Z"}),t("path",{d:"M264.51,24.53a15.58,15.58,0,0,1-.88,5.41,11.78,11.78,0,0,1-2.52,4.12,11,11,0,0,1-4,2.62,14.63,14.63,0,0,1-5.29.91,34,34,0,0,1-5.45-.43,34.71,34.71,0,0,1-4.32-1V1L247.84,0V12.91a13.21,13.21,0,0,1,2.45-.95,11.2,11.2,0,0,1,3.22-.43,11.35,11.35,0,0,1,4.69.93,9.21,9.21,0,0,1,3.45,2.64,12.17,12.17,0,0,1,2.12,4.12A17.84,17.84,0,0,1,264.51,24.53Zm-5.91-.09a10.2,10.2,0,0,0-1.45-5.81,5.16,5.16,0,0,0-4.6-2.15,8.85,8.85,0,0,0-4.71,1.38V32.2a12.53,12.53,0,0,0,1.59.26,19.76,19.76,0,0,0,2.36.12,6.16,6.16,0,0,0,5-2.16A9,9,0,0,0,258.6,24.44Z"}),t("path",{d:"M276.9,4.76a3.32,3.32,0,0,1-1,2.58,3.6,3.6,0,0,1-2.48.95,3.64,3.64,0,0,1-2.52-.95,3.32,3.32,0,0,1-1.05-2.58,3.37,3.37,0,0,1,1.05-2.62,3.64,3.64,0,0,1,2.52-1,3.6,3.6,0,0,1,2.48,1A3.37,3.37,0,0,1,276.9,4.76Z"}),t("rect",{x:"270.51",y:"12.05",width:"5.76",height:"24.91"}),t("path",{d:"M289.85,32.82a7.52,7.52,0,0,0,3.34-.55,1.94,1.94,0,0,0,1.05-1.88,2.47,2.47,0,0,0-1.12-2.05,16.73,16.73,0,0,0-3.7-1.76,30.09,30.09,0,0,1-2.88-1.21,9.87,9.87,0,0,1-2.26-1.5,6.13,6.13,0,0,1-1.5-2.08,7.13,7.13,0,0,1-.55-3,6.48,6.48,0,0,1,2.53-5.41,10.83,10.83,0,0,1,6.86-2,23.33,23.33,0,0,1,7.19,1.19l-1.05,4.67a13.68,13.68,0,0,0-2.43-.78,14.56,14.56,0,0,0-3.43-.36,6.08,6.08,0,0,0-2.86.59A2,2,0,0,0,288,18.58a2.65,2.65,0,0,0,.21,1.09,2.43,2.43,0,0,0,.74.89,7.62,7.62,0,0,0,1.38.81,22,22,0,0,0,2.1.83,34,34,0,0,1,3.48,1.5,9.36,9.36,0,0,1,2.35,1.67,5.71,5.71,0,0,1,1.36,2.12,8.3,8.3,0,0,1,.43,2.85,6.15,6.15,0,0,1-2.64,5.41c-1.77,1.22-4.28,1.84-7.55,1.84a20.84,20.84,0,0,1-5.29-.55,28.87,28.87,0,0,1-2.81-.88l1-4.81a28.54,28.54,0,0,0,3.07,1A16.2,16.2,0,0,0,289.85,32.82Z"})]})})}),Dt=({context:n,algorithm:o="all-context-master-posts",postboxPlaceholder:a="Share your comment here"})=>{const p=c.useRef(),{orbis:d,showPoweredByOrbis:y}=se(),[A,_]=c.useState(0),[u,l]=c.useState([]),[v,i]=c.useState(!1),[E,T]=c.useState(!1),[j,B]=c.useState(0),[H,g]=c.useState(!1),h=async k=>{if(!d||!n||v)return;const z=k?.reset?[]:[...u];k?.polling||(g(!0),i(!0));const{data:F,error:K}=await d.getPosts({context:n,algorithm:o},k?.polling||k?.reset?0:A);if(F)if(k?.polling){const Y=F.filter(W=>!z.some(q=>W.stream_id===q.stream_id));Y.length>0&&(l([...Y,...z]),B(W=>W+Y.length))}else{l([...z,...F]);const Y=k?.reset?1:A+1;_(Y),T(F.length>=50),g(!1),i(!1)}K&&console.error(K)},P=k=>{const z=[k,...u];l(z)};return Ve(()=>{h({polling:!0})},H?null:1e4),c.useEffect(()=>{n&&(_(0),setTimeout(()=>{h({reset:!0})},100))},[n]),b("div",{ref:p,className:"comments",children:[y&&t(Mt,{}),t("div",{className:"comments__postbox",children:t(be,{context:n,placeholder:a,popoverPosition:"bottom",callback:P})}),b("div",{className:"comments__posts",children:[u.map(k=>t(Nt,{post:k},k.stream_id)),E&&!v&&t(Ot,{onClick:()=>h()}),v&&t(Tt,{}),j>0&&b("div",{children:[j," New ",j>1?"Messages":"Message"]})]})]})},or="";Z.Comments=Dt,Z.OrbisProvider=St,Z.useOrbis=se,Object.defineProperties(Z,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
