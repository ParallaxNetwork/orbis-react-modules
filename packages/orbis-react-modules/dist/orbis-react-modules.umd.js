(function(I,c){typeof exports=="object"&&typeof module<"u"?c(exports,require("react"),require("@orbisclub/orbis-sdk"),require("react-string-replace"),require("luxon"),require("ethereum-blockies-base64"),require("@radix-ui/react-dropdown-menu"),require("@radix-ui/react-alert-dialog")):typeof define=="function"&&define.amd?define(["exports","react","@orbisclub/orbis-sdk","react-string-replace","luxon","ethereum-blockies-base64","@radix-ui/react-dropdown-menu","@radix-ui/react-alert-dialog"],c):(I=typeof globalThis<"u"?globalThis:I||self,c(I["orbis-react-modules"]={},I.require$$0,I.orbisSdk,I.reactStringReplace,I.luxon,I.makeBlockie,I.DropdownMenu,I.AlertDialog))})(this,function(I,c,ct,lt,ve,ut,dt,ft){"use strict";const _e=n=>n&&typeof n=="object"&&"default"in n?n:{default:n};function ke(n){if(n&&n.__esModule)return n;const i=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(n){for(const s in n)if(s!=="default"){const v=Object.getOwnPropertyDescriptor(n,s);Object.defineProperty(i,s,v.get?v:{enumerable:!0,get:()=>n[s]})}}return i.default=n,Object.freeze(i)}const Ne=_e(c),ne=_e(lt),mt=_e(ut),$=ke(dt),X=ke(ft);var le={exports:{}},ae={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Oe;function ht(){if(Oe)return ae;Oe=1;var n=Ne.default,i=Symbol.for("react.element"),s=Symbol.for("react.fragment"),v=Object.prototype.hasOwnProperty,u=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,y={key:!0,ref:!0,__self:!0,__source:!0};function b(E,l,d){var p,a={},_=null,k=null;d!==void 0&&(_=""+d),l.key!==void 0&&(_=""+l.key),l.ref!==void 0&&(k=l.ref);for(p in l)v.call(l,p)&&!y.hasOwnProperty(p)&&(a[p]=l[p]);if(E&&E.defaultProps)for(p in l=E.defaultProps,l)a[p]===void 0&&(a[p]=l[p]);return{$$typeof:i,type:E,key:_,ref:k,props:a,_owner:u.current}}return ae.Fragment=s,ae.jsx=b,ae.jsxs=b,ae}var se={};/**
 * @license React
 * react-jsx-runtime.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Te;function pt(){return Te||(Te=1,process.env.NODE_ENV!=="production"&&function(){var n=Ne.default,i=Symbol.for("react.element"),s=Symbol.for("react.portal"),v=Symbol.for("react.fragment"),u=Symbol.for("react.strict_mode"),y=Symbol.for("react.profiler"),b=Symbol.for("react.provider"),E=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),p=Symbol.for("react.suspense_list"),a=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),k=Symbol.for("react.offscreen"),j=Symbol.iterator,H="@@iterator";function F(e){if(e===null||typeof e!="object")return null;var r=j&&e[j]||e[H];return typeof r=="function"?r:null}var S=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function f(e){{for(var r=arguments.length,o=new Array(r>1?r-1:0),m=1;m<r;m++)o[m-1]=arguments[m];x("error",e,o)}}function x(e,r,o){{var m=S.ReactDebugCurrentFrame,A=m.getStackAddendum();A!==""&&(r+="%s",o=o.concat([A]));var P=o.map(function(C){return String(C)});P.unshift("Warning: "+r),Function.prototype.apply.call(console[e],console,P)}}var Z=!1,ee=!1,O=!1,W=!1,G=!1,U;U=Symbol.for("react.module.reference");function K(e){return!!(typeof e=="string"||typeof e=="function"||e===v||e===y||G||e===u||e===d||e===p||W||e===k||Z||ee||O||typeof e=="object"&&e!==null&&(e.$$typeof===_||e.$$typeof===a||e.$$typeof===b||e.$$typeof===E||e.$$typeof===l||e.$$typeof===U||e.getModuleId!==void 0))}function J(e,r,o){var m=e.displayName;if(m)return m;var A=r.displayName||r.name||"";return A!==""?o+"("+A+")":o}function q(e){return e.displayName||"Context"}function L(e){if(e==null)return null;if(typeof e.tag=="number"&&f("Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue."),typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case v:return"Fragment";case s:return"Portal";case y:return"Profiler";case u:return"StrictMode";case d:return"Suspense";case p:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case E:var r=e;return q(r)+".Consumer";case b:var o=e;return q(o._context)+".Provider";case l:return J(e,e.render,"ForwardRef");case a:var m=e.displayName||null;return m!==null?m:L(e.type)||"Memo";case _:{var A=e,P=A._payload,C=A._init;try{return L(C(P))}catch{return null}}}return null}var R=Object.assign,h=0,N,T,B,Y,ie,Ue,ze;function Ge(){}Ge.__reactDisabledLog=!0;function jt(){{if(h===0){N=console.log,T=console.info,B=console.warn,Y=console.error,ie=console.group,Ue=console.groupCollapsed,ze=console.groupEnd;var e={configurable:!0,enumerable:!0,value:Ge,writable:!0};Object.defineProperties(console,{info:e,log:e,warn:e,error:e,group:e,groupCollapsed:e,groupEnd:e})}h++}}function Zt(){{if(h--,h===0){var e={configurable:!0,enumerable:!0,writable:!0};Object.defineProperties(console,{log:R({},e,{value:N}),info:R({},e,{value:T}),warn:R({},e,{value:B}),error:R({},e,{value:Y}),group:R({},e,{value:ie}),groupCollapsed:R({},e,{value:Ue}),groupEnd:R({},e,{value:ze})})}h<0&&f("disabledDepth fell below zero. This is a bug in React. Please file an issue.")}}var ye=S.ReactCurrentDispatcher,Ce;function de(e,r,o){{if(Ce===void 0)try{throw Error()}catch(A){var m=A.stack.trim().match(/\n( *(at )?)/);Ce=m&&m[1]||""}return`
`+Ce+e}}var Ee=!1,fe;{var It=typeof WeakMap=="function"?WeakMap:Map;fe=new It}function Ke(e,r){if(!e||Ee)return"";{var o=fe.get(e);if(o!==void 0)return o}var m;Ee=!0;var A=Error.prepareStackTrace;Error.prepareStackTrace=void 0;var P;P=ye.current,ye.current=null,jt();try{if(r){var C=function(){throw Error()};if(Object.defineProperty(C.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(C,[])}catch(Q){m=Q}Reflect.construct(e,[],C)}else{try{C.call()}catch(Q){m=Q}e.call(C.prototype)}}else{try{throw Error()}catch(Q){m=Q}e()}}catch(Q){if(Q&&m&&typeof Q.stack=="string"){for(var w=Q.stack.split(`
`),V=m.stack.split(`
`),M=w.length-1,D=V.length-1;M>=1&&D>=0&&w[M]!==V[D];)D--;for(;M>=1&&D>=0;M--,D--)if(w[M]!==V[D]){if(M!==1||D!==1)do if(M--,D--,D<0||w[M]!==V[D]){var z=`
`+w[M].replace(" at new "," at ");return e.displayName&&z.includes("<anonymous>")&&(z=z.replace("<anonymous>",e.displayName)),typeof e=="function"&&fe.set(e,z),z}while(M>=1&&D>=0);break}}}finally{Ee=!1,ye.current=P,Zt(),Error.prepareStackTrace=A}var re=e?e.displayName||e.name:"",it=re?de(re):"";return typeof e=="function"&&fe.set(e,it),it}function Ft(e,r,o){return Ke(e,!1)}function Lt(e){var r=e.prototype;return!!(r&&r.isReactComponent)}function me(e,r,o){if(e==null)return"";if(typeof e=="function")return Ke(e,Lt(e));if(typeof e=="string")return de(e);switch(e){case d:return de("Suspense");case p:return de("SuspenseList")}if(typeof e=="object")switch(e.$$typeof){case l:return Ft(e.render);case a:return me(e.type,r,o);case _:{var m=e,A=m._payload,P=m._init;try{return me(P(A),r,o)}catch{}}}return""}var he=Object.prototype.hasOwnProperty,Je={},Qe=S.ReactDebugCurrentFrame;function pe(e){if(e){var r=e._owner,o=me(e.type,e._source,r?r.type:null);Qe.setExtraStackFrame(o)}else Qe.setExtraStackFrame(null)}function Vt(e,r,o,m,A){{var P=Function.call.bind(he);for(var C in e)if(P(e,C)){var w=void 0;try{if(typeof e[C]!="function"){var V=Error((m||"React class")+": "+o+" type `"+C+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof e[C]+"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.");throw V.name="Invariant Violation",V}w=e[C](r,C,m,o,null,"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED")}catch(M){w=M}w&&!(w instanceof Error)&&(pe(A),f("%s: type specification of %s `%s` is invalid; the type checker function must return `null` or an `Error` but returned a %s. You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument).",m||"React class",o,C,typeof w),pe(null)),w instanceof Error&&!(w.message in Je)&&(Je[w.message]=!0,pe(A),f("Failed %s type: %s",o,w.message),pe(null))}}}var Bt=Array.isArray;function Re(e){return Bt(e)}function Ht(e){{var r=typeof Symbol=="function"&&Symbol.toStringTag,o=r&&e[Symbol.toStringTag]||e.constructor.name||"Object";return o}}function Wt(e){try{return Xe(e),!1}catch{return!0}}function Xe(e){return""+e}function qe(e){if(Wt(e))return f("The provided key is an unsupported type %s. This value must be coerced to a string before before using it here.",Ht(e)),Xe(e)}var ce=S.ReactCurrentOwner,Yt={key:!0,ref:!0,__self:!0,__source:!0},$e,et,Ae;Ae={};function Ut(e){if(he.call(e,"ref")){var r=Object.getOwnPropertyDescriptor(e,"ref").get;if(r&&r.isReactWarning)return!1}return e.ref!==void 0}function zt(e){if(he.call(e,"key")){var r=Object.getOwnPropertyDescriptor(e,"key").get;if(r&&r.isReactWarning)return!1}return e.key!==void 0}function Gt(e,r){if(typeof e.ref=="string"&&ce.current&&r&&ce.current.stateNode!==r){var o=L(ce.current.type);Ae[o]||(f('Component "%s" contains the string ref "%s". Support for string refs will be removed in a future major release. This case cannot be automatically converted to an arrow function. We ask you to manually fix this case by using useRef() or createRef() instead. Learn more about using refs safely here: https://reactjs.org/link/strict-mode-string-ref',L(ce.current.type),e.ref),Ae[o]=!0)}}function Kt(e,r){{var o=function(){$e||($e=!0,f("%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",r))};o.isReactWarning=!0,Object.defineProperty(e,"key",{get:o,configurable:!0})}}function Jt(e,r){{var o=function(){et||(et=!0,f("%s: `ref` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",r))};o.isReactWarning=!0,Object.defineProperty(e,"ref",{get:o,configurable:!0})}}var Qt=function(e,r,o,m,A,P,C){var w={$$typeof:i,type:e,key:r,ref:o,props:C,_owner:P};return w._store={},Object.defineProperty(w._store,"validated",{configurable:!1,enumerable:!1,writable:!0,value:!1}),Object.defineProperty(w,"_self",{configurable:!1,enumerable:!1,writable:!1,value:m}),Object.defineProperty(w,"_source",{configurable:!1,enumerable:!1,writable:!1,value:A}),Object.freeze&&(Object.freeze(w.props),Object.freeze(w)),w};function Xt(e,r,o,m,A){{var P,C={},w=null,V=null;o!==void 0&&(qe(o),w=""+o),zt(r)&&(qe(r.key),w=""+r.key),Ut(r)&&(V=r.ref,Gt(r,A));for(P in r)he.call(r,P)&&!Yt.hasOwnProperty(P)&&(C[P]=r[P]);if(e&&e.defaultProps){var M=e.defaultProps;for(P in M)C[P]===void 0&&(C[P]=M[P])}if(w||V){var D=typeof e=="function"?e.displayName||e.name||"Unknown":e;w&&Kt(C,D),V&&Jt(C,D)}return Qt(e,w,V,A,m,ce.current,C)}}var Se=S.ReactCurrentOwner,tt=S.ReactDebugCurrentFrame;function te(e){if(e){var r=e._owner,o=me(e.type,e._source,r?r.type:null);tt.setExtraStackFrame(o)}else tt.setExtraStackFrame(null)}var xe;xe=!1;function Pe(e){return typeof e=="object"&&e!==null&&e.$$typeof===i}function rt(){{if(Se.current){var e=L(Se.current.type);if(e)return`

Check the render method of \``+e+"`."}return""}}function qt(e){{if(e!==void 0){var r=e.fileName.replace(/^.*[\\\/]/,""),o=e.lineNumber;return`

Check your code at `+r+":"+o+"."}return""}}var nt={};function $t(e){{var r=rt();if(!r){var o=typeof e=="string"?e:e.displayName||e.name;o&&(r=`

Check the top-level render call using <`+o+">.")}return r}}function at(e,r){{if(!e._store||e._store.validated||e.key!=null)return;e._store.validated=!0;var o=$t(r);if(nt[o])return;nt[o]=!0;var m="";e&&e._owner&&e._owner!==Se.current&&(m=" It was passed a child from "+L(e._owner.type)+"."),te(e),f('Each child in a list should have a unique "key" prop.%s%s See https://reactjs.org/link/warning-keys for more information.',o,m),te(null)}}function st(e,r){{if(typeof e!="object")return;if(Re(e))for(var o=0;o<e.length;o++){var m=e[o];Pe(m)&&at(m,r)}else if(Pe(e))e._store&&(e._store.validated=!0);else if(e){var A=F(e);if(typeof A=="function"&&A!==e.entries)for(var P=A.call(e),C;!(C=P.next()).done;)Pe(C.value)&&at(C.value,r)}}}function er(e){{var r=e.type;if(r==null||typeof r=="string")return;var o;if(typeof r=="function")o=r.propTypes;else if(typeof r=="object"&&(r.$$typeof===l||r.$$typeof===a))o=r.propTypes;else return;if(o){var m=L(r);Vt(o,e.props,"prop",m,e)}else if(r.PropTypes!==void 0&&!xe){xe=!0;var A=L(r);f("Component %s declared `PropTypes` instead of `propTypes`. Did you misspell the property assignment?",A||"Unknown")}typeof r.getDefaultProps=="function"&&!r.getDefaultProps.isReactClassApproved&&f("getDefaultProps is only used on classic React.createClass definitions. Use a static property named `defaultProps` instead.")}}function tr(e){{for(var r=Object.keys(e.props),o=0;o<r.length;o++){var m=r[o];if(m!=="children"&&m!=="key"){te(e),f("Invalid prop `%s` supplied to `React.Fragment`. React.Fragment can only have `key` and `children` props.",m),te(null);break}}e.ref!==null&&(te(e),f("Invalid attribute `ref` supplied to `React.Fragment`."),te(null))}}function ot(e,r,o,m,A,P){{var C=K(e);if(!C){var w="";(e===void 0||typeof e=="object"&&e!==null&&Object.keys(e).length===0)&&(w+=" You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.");var V=qt(A);V?w+=V:w+=rt();var M;e===null?M="null":Re(e)?M="array":e!==void 0&&e.$$typeof===i?(M="<"+(L(e.type)||"Unknown")+" />",w=" Did you accidentally export a JSX literal instead of a component?"):M=typeof e,f("React.jsx: type is invalid -- expected a string (for built-in components) or a class/function (for composite components) but got: %s.%s",M,w)}var D=Xt(e,r,o,A,P);if(D==null)return D;if(C){var z=r.children;if(z!==void 0)if(m)if(Re(z)){for(var re=0;re<z.length;re++)st(z[re],e);Object.freeze&&Object.freeze(z)}else f("React.jsx: Static children should always be an array. You are likely explicitly calling React.jsxs or React.jsxDEV. Use the Babel transform instead.");else st(z,e)}return e===v?tr(D):er(D),D}}function rr(e,r,o){return ot(e,r,o,!0)}function nr(e,r,o){return ot(e,r,o,!1)}var ar=nr,sr=rr;se.Fragment=v,se.jsx=ar,se.jsxs=sr}()),se}(function(n){process.env.NODE_ENV==="production"?n.exports=ht():n.exports=pt()})(le);const ge=le.exports.Fragment,t=le.exports.jsx,g=le.exports.jsxs,Me=()=>t("svg",{stroke:"currentColor",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 50 50",children:t("path",{d:"M25,50a4.45,4.45,0,0,1-3.11-1.24L5.17,32.58a4.21,4.21,0,0,1-1-4.67,4.41,4.41,0,0,1,4.11-2.74h2.78a.44.44,0,0,0,.47-.4V5.42A5.49,5.49,0,0,1,17.08,0H32.92a5.49,5.49,0,0,1,5.55,5.42V24.77a.44.44,0,0,0,.47.4h2.78a4.41,4.41,0,0,1,4.11,2.74,4.21,4.21,0,0,1-1,4.67L28.11,48.76A4.45,4.45,0,0,1,25,50ZM8.28,28.26a1.29,1.29,0,0,0-1.25.8,1.14,1.14,0,0,0,.29,1.3L24,46.54a1.42,1.42,0,0,0,1.92,0L42.68,30.36a1.14,1.14,0,0,0,.29-1.3,1.3,1.3,0,0,0-1.25-.8H38.94a3.53,3.53,0,0,1-3.55-3.49V5.42a2.4,2.4,0,0,0-2.47-2.33H17.08a2.4,2.4,0,0,0-2.47,2.33V24.77a3.53,3.53,0,0,1-3.55,3.49Z"})}),De=()=>g("svg",{stroke:"currentColor",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 50 50",children:[t("path",{d:"M24,44a2.09,2.09,0,0,1-4,.74,2.78,2.78,0,0,1-.16-1c0-1.34,0-2.68,0-4,0-.83-.18-1-1-1-1.54,0-3.08,0-4.62,0-.76,0-.9.15-.91.93,0,1.41,0,2.81,0,4.21A2.09,2.09,0,0,1,11.36,46a2.11,2.11,0,0,1-2.25-1.66,3.08,3.08,0,0,1-.1-.8q0-6.93,0-13.87a2.17,2.17,0,0,1,2.26-2.4,2,2,0,0,1,2,2c0,1.43,0,2.86,0,4.28,0,.82.1.92.89.92,1.59,0,3.18,0,4.76,0,.64,0,.9-.26.89-.9,0-1.4,0-2.8,0-4.21a2,2,0,0,1,2.27-2.11A2,2,0,0,1,24,29.47C24.07,31.65,24.06,41.53,24,44Z"}),t("path",{d:"M15,13.51c0,2.45,0,4.89,0,7.34a1.93,1.93,0,0,1-1.4,1.86A2,2,0,0,1,11.2,22a2.12,2.12,0,0,1-.32-1.07c0-1.36,0-2.72,0-4.08,0-1.08-.18-1.25-1.27-1.25H5.3c-1,0-1.08.11-1.08,1.11,0,1.34,0,2.67,0,4a1.91,1.91,0,0,1-2,2.1,2,2,0,0,1-2.2-2c0-.15,0-.31,0-.47C0,15.74,0,11.17,0,6.6A2.34,2.34,0,0,1,1.33,4.21,2,2,0,0,1,4.08,5.4a3.87,3.87,0,0,1,.13,1.07c0,1.34,0,2.68,0,4,0,.59.24.88.85.87,1.61,0,3.22,0,4.83,0a.81.81,0,0,0,.93-.9c0-1.31,0-2.62,0-3.94,0-1.56.78-2.52,2-2.51A2.25,2.25,0,0,1,15,6.51C15,8.85,15,13.51,15,13.51Z"}),t("path",{d:"M17.4,20.33c.26-.71.62-1.83,1.07-2.91,1.61-3.91,3.25-7.81,4.89-11.71A2.42,2.42,0,0,1,25.53,4a2.4,2.4,0,0,1,2.11,1.75c.81,2,1.69,4,2.52,6s1.59,3.89,2.39,5.84c.31.73.65,1.44,1,2.17a2.07,2.07,0,0,1-.86,2.75,2,2,0,0,1-2.82-.74c-.51-1.17-1.3-1.28-2.37-1.24-1.56.06-3.13,0-4.69,0a1.18,1.18,0,0,0-1.31.8,2,2,0,0,1-2.09,1.42A2,2,0,0,1,17.4,20.33Zm8.1-4h1c.65,0,.78-.18.55-.81-.36-1-.78-1.88-1.19-2.81a.56.56,0,0,0-.39-.29c-.13,0-.29.19-.36.34-.28.61-.54,1.24-.8,1.87C23.63,16.29,23.63,16.29,25.5,16.29Z"}),t("path",{d:"M42.79,43.89a2.09,2.09,0,0,1-1.72,2,2,2,0,0,1-2.33-1.19,1.51,1.51,0,0,0-1.72-1c-1.74,0-3.49,0-5.23,0a1.27,1.27,0,0,0-1.35.88A2.09,2.09,0,1,1,26.59,43Q29,37.22,31.37,31.46c.43-1,.88-2.08,1.34-3.11a1.83,1.83,0,0,1,1.87-1.1,1.8,1.8,0,0,1,1.83,1.13q1.37,3.29,2.76,6.56c1.07,2.51,2.17,5,3.23,7.53A3.07,3.07,0,0,1,42.79,43.89Zm-8.21-4.4h1.09c.57,0,.73-.27.52-.79C35.81,37.8,35.43,36.9,35,36c-.1-.2-.24-.53-.47-.52s-.36.32-.45.52c-.42.9-.79,1.82-1.19,2.72-.2.43-.05.67.38.72S34.58,39.48,34.58,39.49Z"}),t("path",{d:"M45.82,33.61c0-1.45,0-2.9,0-4.35a1.81,1.81,0,0,1,1.32-1.92,2,2,0,0,1,2.41.75A2.42,2.42,0,0,1,50,29.35c0,2.87,0,5.75,0,8.62a2,2,0,0,1-1.29,2,2,2,0,0,1-2.86-1.87,1.48,1.48,0,0,1,0-.21V33.61Z"}),t("path",{d:"M40.83,11.35c.83,0,1.67,0,2.51,0a2,2,0,0,1,2.07,2,2,2,0,0,1-1.93,2.19c-1.72.05-3.45.05-5.17,0a1.94,1.94,0,0,1-2-2.19,2,2,0,0,1,2.12-2C39.24,11.34,40,11.35,40.83,11.35Z"}),t("path",{d:"M49.92,43.94a2,2,0,0,1-2.05,2,2,2,0,0,1-2-2.12,1.91,1.91,0,0,1,2.09-2.06A1.94,1.94,0,0,1,49.92,43.94Z"})]}),vt=()=>t("svg",{stroke:"currentColor",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 50 50",children:t("path",{d:"M25.1,7.71a14.7,14.7,0,0,1,9.61-4.37c11.48-.44,18.66,10.75,13.7,21.34-2.85,6.09-7.52,10.69-12.57,14.91a103.8,103.8,0,0,1-9,6.54,3.38,3.38,0,0,1-2.93.35C15.28,41,7.29,34.86,2.22,25.7-.3,21.15-.84,16.36,1.46,11.52a14.44,14.44,0,0,1,22-5.1ZM47,18.19a28.27,28.27,0,0,0-.59-3.57,10.7,10.7,0,0,0-8.2-7.87,10.85,10.85,0,0,0-11.15,3.59c-1.84,2-2.08,2.06-3.93.13-.28-.29-.56-.59-.85-.86A10.71,10.71,0,0,0,11.43,6.89a10.9,10.9,0,0,0-7.92,8.18c-1,3.86.24,7.33,2.24,10.55C10.33,33,17.07,38.21,24.16,43a2.2,2.2,0,0,0,2-.13C32.39,38.69,38.25,34,42.8,28,45,25.08,46.69,22,47,18.19Z"})}),_t=()=>t("svg",{stroke:"currentColor",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 50 50",children:t("path",{d:"M25.1,7.71a14.7,14.7,0,0,1,9.61-4.37c11.48-.44,18.66,10.75,13.7,21.34-2.85,6.09-7.52,10.69-12.57,14.91a103.8,103.8,0,0,1-9,6.54,3.38,3.38,0,0,1-2.93.35C15.28,41,7.29,34.86,2.22,25.7-.3,21.15-.84,16.36,1.46,11.52a14.44,14.44,0,0,1,22-5.1Z"})}),gt=()=>g("svg",{stroke:"currentColor",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 50 50",children:[t("path",{d:"M0,19.32c.07-.55.15-1.09.22-1.64A13.58,13.58,0,0,1,13.62,6c7.59,0,15.18,0,22.76,0a13.62,13.62,0,0,1,13.39,11.4A32.62,32.62,0,0,1,50,21.79a21.65,21.65,0,0,1-.38,5.14,13.7,13.7,0,0,1-10.8,10.32,18.91,18.91,0,0,1-2.91.22c-7.07,0-14.13,0-21.2,0a3,3,0,0,0-1.17.26Q7,40.77.43,43.82L0,44Zm3,20c.25-.09.42-.14.57-.21,3-1.41,6.08-2.84,9.13-4.23a3.44,3.44,0,0,1,1.34-.3c7.28,0,14.56,0,21.85,0a14.55,14.55,0,0,0,2.18-.17A10.72,10.72,0,0,0,47,24c0-1.51,0-3,0-4.54a9.69,9.69,0,0,0-.24-2.08A10.74,10.74,0,0,0,36,8.85H14a13.53,13.53,0,0,0-1.9.16A10.71,10.71,0,0,0,3,19.59V39.35Z"}),t("path",{d:"M27.83,22.27a2.82,2.82,0,1,1-5.63,0,2.82,2.82,0,1,1,5.63,0Z"}),t("path",{d:"M17.56,22.3a2.82,2.82,0,1,1-5.64,0,2.82,2.82,0,1,1,5.64,0Z"}),t("path",{d:"M32.47,22.28a2.82,2.82,0,1,1,2.84,2.86A2.84,2.84,0,0,1,32.47,22.28Z"})]}),je=()=>t("svg",{stroke:"currentColor",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 50 50",children:t("path",{d:"M24.8,10.39c0,1.79,0,3.58,0,5.36,0,.72.24,1,.94,1.06,2.82.33,5.65.58,8.43,1.12a18.65,18.65,0,0,1,10.06,5.2,18.77,18.77,0,0,1,4.64,9.15c1,4.06,1,8.2,1.14,12.32,0,1.32-.54,2.07-1.53,2a2,2,0,0,1-1.28-.7c-.6-.9-1-1.91-1.57-2.87a16.34,16.34,0,0,0-10.52-8.4A38.8,38.8,0,0,0,26,33.25c-1,0-1.24.31-1.23,1.25,0,3.37,0,6.75,0,10.12,0,.8-.07,1.58-.93,1.9a1.87,1.87,0,0,1-2-.64Q14,38.56,6.05,31.28c-1.79-1.66-3.6-3.3-5.4-5a1.67,1.67,0,0,1,0-2.66l14.5-13.39C17.45,8.16,19.74,6.07,22,4a1.68,1.68,0,0,1,1.9-.44,1.54,1.54,0,0,1,.89,1.62C24.79,6.89,24.8,8.64,24.8,10.39Zm21.86,28.3a3.42,3.42,0,0,0,.07-.82c-.31-1.95-.51-3.93-1-5.84a14.14,14.14,0,0,0-8.8-10.15c-4.16-1.68-8.53-2-12.93-2.09-1.86-.05-2.24-.41-2.24-2.3q0-3.87,0-7.74c0-.34-.05-.68-.1-1.31L3.73,25,21.46,41.38l.25-.15c0-.35.06-.7.06-1,0-2.68,0-5.36,0-8,0-1.41.5-1.91,1.91-1.91a47.9,47.9,0,0,1,10.34,1c4.7,1,8.87,3,12,6.85A6.51,6.51,0,0,0,46.66,38.69Z"})}),bt=()=>g("svg",{stroke:"currentColor",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 50 50",children:[t("path",{d:"M19.63,25.05A5.38,5.38,0,1,1,30.38,25a5.38,5.38,0,1,1-10.75.07Z"}),t("path",{d:"M39.23,25A5.39,5.39,0,1,1,50,25,5.39,5.39,0,1,1,39.23,25Z"}),t("path",{d:"M10.76,25a5.34,5.34,0,0,1-5.35,5.4A5.35,5.35,0,0,1,0,25a5.38,5.38,0,1,1,10.76,0Z"})]}),wt=()=>g("svg",{stroke:"currentColor",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 50 50",children:[t("path",{d:"M30.85,36.71a12.08,12.08,0,0,1,0-24.16c.35,0,.69,0,1,0V0a6.18,6.18,0,0,0-3.7,1.12C26.82,2.31,23.87,9,19.24,13.29c-6.44,6-9.67,6.39-11.12,8a4.63,4.63,0,0,0-1.55,3.61v.12a4.63,4.63,0,0,0,1.55,3.61c1.45,1.65,4.68,2,11.12,8,4.63,4.32,7.58,11,8.94,12.17A6.18,6.18,0,0,0,31.88,50V36.67C31.54,36.69,31.2,36.71,30.85,36.71Z"}),t("path",{d:"M43,34.92l-4.59-4.85a8.72,8.72,0,0,0-13-11.58,8.73,8.73,0,0,0,5.76,15.06h.25a8.69,8.69,0,0,0,4.86-1.48l4.59,4.85a1.44,1.44,0,0,0,1,.45A1.44,1.44,0,0,0,43,34.92ZM31.31,30.65A5.83,5.83,0,0,1,31.47,19h.16a5.83,5.83,0,0,1-.32,11.65Z"})]}),be=n=>{if(!n)return"-";const i=n.substring(0,5),s=n.substring(n.length-5);return i+"-"+s},ue=(n,i=!1)=>{if(!n)return"";const s=n.split(":");return i?be(s[4]):s[4]},Ze=n=>n?.profile?.username||be(ue(n?.did)),Ie=n=>n?.metadata?.ensName||be(ue(n?.did)),Fe=/\B@[a-z0-9_.â™-]+/gi,yt=n=>{if(!n)return"";let{body:i}=n;const{mentions:s}=n,v=n.body.toString().match(Fe);v&&s&&Array.isArray(s)&&v.forEach(y=>{s.find(E=>E.username===y)!==void 0&&(i=i.replace(y,`<span class="highlighted" contenteditable="false">${y}</span>`))});const u=new RegExp(String.fromCharCode(160),"g");return i=i.replace(u," "),i},Ct=(n,i=!1,s=0,v="https://app.orbis.club/profile/")=>{if(!n||!n.body)return null;let u=n.body;if(s>0&&i&&u.length>s)return u=u.substring(0,s),u+"...";u=ne.default(u,"<br>",function(l,d){return t("br",{},l+d)}),u=ne.default(u,`
`,function(l,d){return t("br",{},l+d)}),u=ne.default(u,/(https?:\/\/(?:www\.|(?!www))[a-zA-Z0-9][a-zA-Z0-9-]+[a-zA-Z0-9]\.[^\s]{2,}|www\.[a-zA-Z0-9][a-zA-Z0-9-]+[a-zA-Z0-9]\.[^\s]{2,}|https?:\/\/(?:www\.|(?!www))[a-zA-Z0-9]+\.[^\s]{2,}|www\.[a-zA-Z0-9]+\.[^\s]{2,})/g,function(l,d){return t("a",{href:l,rel:"noreferrer",target:"_blank",title:l,className:"highlighted",children:l},l+d)});const{mentions:y}=n,b=n.body.toString().match(Fe);b&&y&&Array.isArray(y)&&b.forEach(l=>{const d=y.find(p=>p.username===l);d!==void 0&&(u=ne.default(u,l,(p,a)=>d.did?t("a",{href:`${v}${d.did}`,target:"_blank",rel:"noreferrer",children:d.username},p+a):t("span",{className:"highlighted",children:d.username},p+a)))});const E=new RegExp(String.fromCharCode(160),"g");return u=ne.default(u,E,function(l){return" "+l}),u},Le=n=>{const i=ve.DateTime.now(),s=ve.DateTime.fromSeconds(n),v=i.diff(s,["days"]);let u=s.toRelative();return v.get("days")>7&&(u=s.toLocaleString(ve.DateTime.DATETIME_MED)),u},Et=n=>new Promise(i=>setTimeout(i,n)),Rt=(n,i)=>{let s;return(...v)=>new Promise(u=>{s&&clearTimeout(s),s=setTimeout(()=>u(n(...v)),i)})},At={like:t(vt,{}),likeActive:t(_t,{}),haha:t(De,{}),hahaActive:t(De,{}),downvote:t(Me,{}),downvoteActive:t(Me,{}),replyto:t(je,{}),replytoActive:t(je,{}),comment:t(gt,{})},Ve=c.createContext({}),St=({children:n,customIcons:i=null,options:s={},profileUrl:v="https://app.orbis.club/profile/",showPoweredByOrbis:u=!1,showCerscanProof:y=!1})=>{const b=new ct.Orbis(s),E=i||At,[l,d]=c.useState(!1),[p,a]=c.useState(null),[_,k]=c.useState(!1),j=async()=>{console.log("connecting",l);const f=await b.connect_v2({provider:l,chain:"ethereum"});if(console.log(f),f.status!==200)await Et(2e3),await j();else{const{data:x}=await b.getProfile(f.did);a(x)}},H=()=>{b.logout().status===200&&a(null)},F=async()=>{const f=await b.connectLit(l);return k(f.status===200),f},S=async(f=!1)=>{const x=await b.isConnected();if(x.status===200){const{data:Z}=await b.getProfile(x.did);k(x?.details?.hasLit),a(Z)}else f&&await j()};return t(Ve.Provider,{value:{orbis:b,icons:E,provider:l,profile:p,profileUrl:v,hasLit:_,showPoweredByOrbis:u,showCerscanProof:y,setProvider:d,connectOrbis:j,connectLit:F,checkOrbisConnection:S,disconnectOrbis:H},children:n})},oe=()=>c.useContext(Ve),Be=(n,i)=>{const s=c.useRef(()=>{});c.useEffect(()=>{s.current=n}),c.useEffect(()=>{if(i!==null){const v=setInterval(()=>s.current(),i||0);return()=>clearInterval(v)}},[i])},He=({details:n})=>{const i=ue(n?.did)||"";return t("div",{className:"avatar",children:t("img",{src:n?.profile?.pfp||mt.default(i),className:"w-full h-full object-cover object-center"})})},we=({context:n,editPost:i,replyTo:s,placeholder:v="Share your post here...",enterToShare:u=!0,popoverPosition:y="top",cancelReplyTo:b,cancelEdit:E,callback:l})=>{const{orbis:d,profile:p,connectOrbis:a}=oe(),_=c.useRef(null),[k,j]=c.useState(0),[H,F]=c.useState(null),[S,f]=c.useState(!1),[x,Z]=c.useState(""),[ee,O]=c.useState([]),[W,G]=c.useState([]),U=()=>{const h=document.getSelection();h&&(j(h.focusOffset),F(h.focusNode))},K=()=>{if(!_.current)return;_.current.focus();const h=document.getSelection();h&&h.collapse(H,k)},J=Rt(async()=>{f(!0),O([]);const{data:h,error:N}=await d.getProfilesByUsername(x);h?O(h):console.log(N),f(!1)},1e3),q=h=>{K();const N=h?.details?.profile?.username?.trim();W?.find(Y=>N===Y?.username)||G([...W,{username:"@"+N,did:h.did}]);const B='<span href="/profile/'+h.did+'" class="text-lime-700" contenteditable="false" data-did="'+h.did+'">@'+N+"</span><span> </span>";for(let Y=0;Y<x.length+1;Y++)document.execCommand("delete",!1,""),Y==x.length&&document.execCommand("insertHTML",!1,B);setTimeout(()=>{Z(""),_.current.focus(),_.current.innerHTML.replace(/&nbsp;$/," ")},100)},L=async()=>{if(!d||!p)return!1;const h=_.current.innerText,N=W.filter(T=>h.includes(T.username));if(i){const T={...i.content,body:h,mentions:N};l&&l(T),await d.editPost(i.stream_id,T)}else{const T={body:h,context:n,master:s?s.master||s.stream_id:null,reply_to:s?s.stream_id:null,mentions:N||[]},B=Math.floor(Date.now()/1e3),Y={content:T,context:n,creator:p.did,creator_details:{did:p.did,profile:p.details?.profile,metadata:p.details?.metadata},stream_id:"new_post-"+B,timestamp:B,master:s?s.master||s.stream_id:null,reply_to:s?s.stream_id:null,reply_to_creator_details:s?s.creator_details:null,reply_to_details:s?s.content:null,count_commits:1,count_likes:0,count_haha:0,count_downvotes:0,count_replies:0,type:s?"reply":null};console.log(Y),l&&l(Y),_.current.innerText="";const ie=await d.createPost(T);ie.status===200&&(Y.stream_id=ie.doc,l&&l(Y))}},R=h=>{!h.key||u&&h.key==="Enter"&&!h.shiftKey&&(h.preventDefault(),L())};return c.useEffect(()=>{if(!_.current)return;_.current.innerText||(Z(""),f(!1),O([]));let N="";for(let T=k;T>0;T--){const B=H?.textContent?.substring(T-1,T)?.trim();if(N=B+N,!B){Z(""),f(!1),O([]);return}if(B==="@"){Z(N.replace("@",""));return}f(!1),Z("")}},[k,H]),c.useEffect(()=>{x?J():(f(!1),O([]))},[x]),c.useEffect(()=>{s&&_.current.focus()},[s]),c.useEffect(()=>{if(i){let{body:h}=i.content;const{mentions:N}=i.content;N?.length&&(G(N),h=yt(i.content)),_.current.innerHTML=h,setTimeout(()=>{if(_.current.focus(),typeof window.getSelection<"u"&&typeof document.createRange<"u"){const T=document.createRange();T.selectNodeContents(_.current),T.collapse(!1);const B=window.getSelection();B?.removeAllRanges(),B?.addRange(T)}},100)}},[i]),p?g("div",{className:"postbox",children:[x&&t("div",{className:`mentions ${y==="top"?"mentions--top":"mentions--bottom"}`,children:t("div",{className:"mentions__scrollable",children:S?t("div",{className:"mentions__loading",children:"Loading..."}):ee.map(h=>g("div",{className:"mentions__account",onClick:()=>q(h),children:[t("div",{className:"mentions__account__avatar",children:t(He,{details:h?.details})}),g("div",{className:"mentions__account__name",children:[t("span",{children:Ze(h?.details)}),t("span",{className:"badge",children:Ie(h?.details)})]})]},h.did))})}),s&&g("div",{className:"replyto",children:[g("div",{className:"replyto__details",children:["Replying to"," ",t("strong",{children:s?.creator_details?.profile?.username||s?.creator_details?.metadata?.ensName||ue(s?.creator_details?.did,!0)}),t("br",{}),s.content?.body]}),b&&t("button",{className:"replyto__cancel",onClick:()=>b&&b(),children:"\xD7"})]}),t("div",{ref:_,className:"postbox__contenteditable",contentEditable:!0,"data-placeholder":v,onKeyDown:R,onKeyUp:U,onMouseUp:U}),i&&t(ge,{children:g("div",{className:"postbox__editmenu",children:[t("button",{onClick:()=>E&&E(!1),children:"Cancel"})," ","\u2022 Enter to ",t("button",{onClick:L,children:"Save"})]})}),!u&&t("button",{className:"postbox__share",onClick:L,children:"Share"})]}):t("button",{className:"gradient-button",onClick:a,children:"Connect"})},xt=({children:n,onAction:i})=>g($.Root,{children:[t($.Trigger,{asChild:!0,children:n}),t($.Portal,{children:g($.Content,{className:"post__popover",side:"top",sideOffset:5,children:[t($.Item,{className:"edit",onSelect:()=>i("edit"),children:"Edit Post"}),t($.Item,{className:"delete",onSelect:()=>i("delete"),children:"Delete Post"}),t($.Arrow,{className:"post__popover__arrow"})]})})]}),Pt=({open:n,setOpen:i,confirm:s})=>t(X.Root,{open:n,onOpenChange:i,children:g(X.Portal,{children:[t(X.Overlay,{className:"post__deleteconfirmation__overlay"}),g(X.Content,{className:"post__deleteconfirmation__content",children:[t(X.Title,{className:"post__deleteconfirmation__title",children:"Are you sure you want to delete this post?"}),t(X.Description,{className:"post__deleteconfirmation__description",children:"If you ask for deletion your post might be removed from the Ceramic nodes hosting it."}),g("div",{className:"post__deleteconfirmation__actions",children:[t(X.Cancel,{asChild:!0,children:t("button",{className:"cancel",children:"Cancel"})}),t(X.Action,{asChild:!0,children:t("button",{className:"delete",onClick:s,children:"Delete"})})]})]})]})}),We=({post:n,replyTo:i=null,overflowLimit:s=0,onClickReply:v})=>{const u=c.useRef(),{orbis:y,profile:b,icons:E,profileUrl:l}=oe(),[d,p]=c.useState(null),[a,_]=c.useState({...n}),[k,j]=c.useState(s>0?a.content.body.length>=s:!1),[H,F]=c.useState(!1),[S,f]=c.useState(0),[x,Z]=c.useState(!1),[ee,O]=c.useState(null),W=async()=>{if(!y||!b)return;const{data:R}=await y.getReaction(a.stream_id,b.did);R&&p(R.type)},G=async()=>{const{data:R,error:h}=await y.getPost(n.stream_id);h&&console.error(h),R&&_(R)},U=async R=>{if(R===d)return;p(R);const h={like:"count_likes",haha:"count_haha",downvote:"count_downvotes"},N={...a};d&&(N[h[d]]-=1),N[h[R]]+=1,_({...N}),(await y.react(a.stream_id,R)).status!==200&&_({...a})},K=R=>{R==="edit"?F(!0):R==="delete"&&Z(!0)},J=R=>{_({...a,content:R,count_commits:a.count_commits+1}),F(!1)},q=async()=>{console.log(`deleting ${a.stream_id}`),f(1),await y.deletePost(a.stream_id),f(2)},L=c.useMemo(()=>{const R=[a.stream_id];return(a.stream_id.startsWith("new_post-")||S==1)&&R.push("post--pulse"),S==2&&R.push("post--deleted"),R.join(" ")},[a,S]);return Be(()=>{if(a){const R=Le(a.timestamp);O(R)}},a?6e4:null),c.useEffect(()=>{n&&G()},[n]),c.useEffect(()=>{a&&b&&W()},[a,b]),g("div",{ref:u,className:`post ${L}`,children:[t("div",{className:"post__side",children:t("div",{className:"post__avatar",children:t(He,{details:a?.creator_details})})}),g("div",{className:"post__content",children:[g("div",{className:"post__info",children:[t("a",{href:`${l}${a.creator_details?.did}`,target:"_blank",rel:"noreferrer",children:Ze(a.creator_details)}),t("span",{className:"badge",children:Ie(a.creator_details)}),g("span",{className:"post__time",children:["\u2022 ",ee||Le(a.timestamp)]})]}),g("div",{className:"post__body content",children:[S==2?"This post is deleted":H?t(we,{context:a.context,editPost:a,cancelEdit:R=>F(R),callback:J}):t(ge,{children:Ct(a.content,k,s,l)}),a.count_commits>1&&S!=2&&t("span",{className:"post__edited",children:"(edited)"})]}),a?.indexing_metadata?.urlMetadata&&g("div",{className:"post__metadata",children:[a?.indexing_metadata?.urlMetadata?.image&&t("a",{href:a?.indexing_metadata?.urlMetadata?.url,className:"post__metadata__image",target:"_blank",rel:"noreferrer",children:t("img",{src:a?.indexing_metadata?.urlMetadata?.image})}),g("div",{className:"post__metadata__content",children:[t("small",{children:a?.indexing_metadata?.urlMetadata?.source}),t("h1",{children:t("a",{href:a?.indexing_metadata?.urlMetadata?.url,target:"_blank",rel:"noreferrer",children:a?.indexing_metadata?.urlMetadata?.title})}),t("p",{children:a?.indexing_metadata?.urlMetadata?.description})]})]}),k&&t("button",{className:"gradient-button",onClick:()=>j(!1),children:"View more"}),S!=2&&g("div",{className:"post__menu",children:[g("div",{className:"post__reactions",children:[t("button",{className:`${i?.stream_id===a.stream_id?"active":""}`,onClick:()=>v&&v(a),title:"Reply",children:t("span",{className:"icon",children:E.replyto})}),g("button",{className:d==="like"?"active":"",onClick:()=>U("like"),disabled:d==="like",title:"Like",children:[t("span",{className:"icon",children:d==="like"?E.likeActive:E.like}),t("span",{children:a.count_likes})]}),g("button",{className:d==="haha"?"active":"",onClick:()=>U("haha"),disabled:d==="haha",title:"HAHA",children:[t("span",{className:"icon",children:d==="haha"?E.hahaActive:E.haha}),t("span",{children:a.count_haha})]}),g("button",{className:d==="downvote"?"active":"",onClick:()=>U("downvote"),disabled:d==="downvote",title:"Downvote",children:[t("span",{className:"icon",children:d==="downvote"?E.downvoteActive:E.downvote}),t("span",{children:a.count_downvotes})]})]}),a.stream_id!=="new_post"&&g("div",{className:"post__actions",children:[n?.creator_details?.did===b?.did&&t(xt,{onAction:K,children:t("button",{children:t("span",{className:"icon",children:t(bt,{})})})}),t("a",{href:`https://cerscan.com/mainnet/stream/${a.stream_id}`,className:"cerscan-proof",target:"_blank",rel:"noreferrer",title:"View on Cerscan",children:t("span",{className:"icon",children:t(wt,{})})})]})]})]}),t(Pt,{open:x,setOpen:Z,confirm:q})]})},Ye=({items:n,replies:i,replyTo:s=null,onClickReply:v})=>t(ge,{children:n.map(u=>g("div",{className:"replies",children:[t(We,{post:u,replyTo:s,onClickReply:()=>v(u)}),i[u.stream_id]!==void 0&&t(Ye,{items:i[u.stream_id],replies:i,replyTo:s,onClickReply:v})]},u.stream_id))}),kt=({context:n,master:i,innerPostbox:s,replyTo:v,onClickReply:u,onNewPost:y})=>{const{orbis:b}=oe(),E=c.useRef(null),[l,d]=c.useState([]),[p,a]=c.useState(0),[_,k]=c.useState(!1),j=c.useMemo(()=>l.reduce((f,x)=>(f[x.reply_to]=[...f[x.reply_to]||[],x],f),{}),[l]),H=async()=>{if(!b||!n||!i||_)return;k(!0);const{data:S,error:f}=await b.getPosts({context:n,master:i.stream_id},p);S&&(S.reverse(),d([...l,...S]),a(x=>x+1)),f&&console.error(f),k(!1)},F=S=>{const f=[...l,S];d(f),u(null),S.stream_id.startsWith("new_post-")&&setTimeout(()=>{const x=E.current?.querySelector(`.${S.stream_id}`);y(x)},100)};return c.useEffect(()=>{n&&i&&H()},[n,i]),g("div",{ref:E,children:[j[i.stream_id]!==void 0&&t(Ye,{items:j[i.stream_id],replies:j,replyTo:v,onClickReply:u}),v&&t("div",{ref:s,children:t(we,{context:n,replyTo:v,placeholder:"Reply this comment...",cancelReplyTo:()=>u(null),callback:F})})]})},Nt=({post:n,overflowLimit:i=0,showToggleRepliesButton:s=!1})=>{const v=c.useRef(null),u=c.useRef(null),[y,b]=c.useState(!1),[E,l]=c.useState(null),[d,p]=c.useState(null);return c.useEffect(()=>{if(d!==null&&u.current){const a=u.current?.closest(".comments__posts");if(!a)return;const _=a.offsetHeight/2;d==="masterPost"&&u.current?setTimeout(()=>{a.scrollTo({top:u.current?.offsetTop-a.offsetTop,behavior:"smooth"})},500):d==="postbox"&&v.current?setTimeout(()=>{a.scrollTo({top:v.current?.offsetTop-_,behavior:"smooth"})},500):setTimeout(()=>{const k=d;a.scrollTo({top:k.offsetTop-_,behavior:"smooth"})},500)}return()=>{setTimeout(()=>{p(null)},500)}},[E,y,d]),c.useEffect(()=>{y||l(null)},[y]),g("div",{ref:u,className:"comments__post",children:[t(We,{post:n,replyTo:E,overflowLimit:i,onClickReply:()=>{l(n),b(!0),p("postbox")}}),s&&n.count_replies!==void 0&&n.count_replies>0&&g("button",{className:`comments__post__toggle-replies ${y?"opened":""}`,onClick:()=>{p(y?null:"masterPost"),b(a=>!a)},children:[y?"Hide":"Show"," replies"]}),(!s||y)&&t(kt,{context:n.context,master:n,replyTo:E,innerPostbox:v,onClickReply:a=>{l(a),p("postbox")},onNewPost:a=>p(a)})]})},Ot=({onClick:n,text:i="Load older posts"})=>t("button",{className:"gradient-button",onClick:n,children:i}),Tt=()=>t("div",{className:"loading",children:"Loading..."}),Mt=()=>t("div",{className:"powered-by-orbis",children:t("a",{href:"https://orbis.club",target:"_blank",rel:"noreferrer",children:g("svg",{stroke:"currentColor",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 300 42.58",children:[t("path",{d:"M2.12,42.48H0V20.17a19.39,19.39,0,0,1,2.41-.61,19.1,19.1,0,0,1,3.72-.3,9.12,9.12,0,0,1,3.38.6,7.32,7.32,0,0,1,2.6,1.75,7.84,7.84,0,0,1,1.7,2.77,10.66,10.66,0,0,1,.6,3.69,12,12,0,0,1-.5,3.53,7.9,7.9,0,0,1-1.49,2.78A6.92,6.92,0,0,1,10,36.19a7.79,7.79,0,0,1-3.25.65,7.82,7.82,0,0,1-2.88-.48,7.42,7.42,0,0,1-1.78-.89Zm0-9.07a6.14,6.14,0,0,0,.73.49,6.59,6.59,0,0,0,1,.49,9,9,0,0,0,1.27.38,7.48,7.48,0,0,0,1.44.14,5.85,5.85,0,0,0,2.62-.53,4.53,4.53,0,0,0,1.71-1.47,6.22,6.22,0,0,0,.95-2.19,11.33,11.33,0,0,0,.29-2.65A7.21,7.21,0,0,0,10.5,23a5.77,5.77,0,0,0-4.4-1.78,17,17,0,0,0-2.53.15,9.61,9.61,0,0,0-1.45.31Z"}),t("path",{d:"M33.39,28a10.87,10.87,0,0,1-.57,3.62,7.94,7.94,0,0,1-1.6,2.77,7,7,0,0,1-2.43,1.78,7.8,7.8,0,0,1-6.19,0,7,7,0,0,1-2.43-1.78,7.94,7.94,0,0,1-1.6-2.77,11.78,11.78,0,0,1,0-7.24,8.32,8.32,0,0,1,1.6-2.79,7.18,7.18,0,0,1,2.43-1.79,7.92,7.92,0,0,1,6.19,0,7.18,7.18,0,0,1,2.43,1.79,8.32,8.32,0,0,1,1.6,2.79A11,11,0,0,1,33.39,28Zm-2.25,0a7.92,7.92,0,0,0-1.47-5,4.74,4.74,0,0,0-4-1.88,4.76,4.76,0,0,0-4,1.88,7.92,7.92,0,0,0-1.47,5,7.85,7.85,0,0,0,1.47,5,4.8,4.8,0,0,0,4,1.86,4.78,4.78,0,0,0,4-1.86A7.85,7.85,0,0,0,31.14,28Z"}),t("path",{d:"M48.87,19.59c.19,1.08.45,2.24.76,3.47s.66,2.48,1,3.75.78,2.53,1.21,3.76.85,2.41,1.29,3.5c.37-.83.76-1.83,1.18-3s.82-2.43,1.24-3.74.8-2.64,1.16-4,.66-2.59.9-3.74h2.09c-.79,3.31-1.64,6.33-2.57,9.07s-2,5.33-3.06,7.79h-2c-.32-.77-.67-1.63-1-2.57s-.74-2-1.12-3-.75-2.21-1.11-3.39-.7-2.4-1-3.63c-.32,1.24-.66,2.45-1,3.64s-.73,2.31-1.11,3.39-.75,2.09-1.11,3-.7,1.8-1,2.56h-2a81.16,81.16,0,0,1-3.06-7.8c-.92-2.74-1.78-5.76-2.56-9.06h2.25c.24,1.15.54,2.39.9,3.73s.75,2.66,1.17,4,.83,2.56,1.26,3.73.82,2.18,1.19,3c.42-1.08.83-2.24,1.25-3.48s.81-2.49,1.18-3.76.71-2.5,1-3.73.61-2.39.87-3.47Z"}),t("path",{d:"M62.25,28a10.73,10.73,0,0,1,.63-3.86,8.55,8.55,0,0,1,1.67-2.76,6.45,6.45,0,0,1,2.35-1.65,7.28,7.28,0,0,1,2.72-.53,6.36,6.36,0,0,1,4.94,2c1.23,1.35,1.84,3.42,1.84,6.23,0,.17,0,.34,0,.52s0,.34,0,.49H64.5A7.42,7.42,0,0,0,66,33.22a5.73,5.73,0,0,0,4.57,1.66,9.17,9.17,0,0,0,2.74-.33A10.6,10.6,0,0,0,74.8,34l.39,1.83a8.9,8.9,0,0,1-1.71.62,11.15,11.15,0,0,1-3,.35,9.7,9.7,0,0,1-3.78-.65,6.82,6.82,0,0,1-2.58-1.82,7.31,7.31,0,0,1-1.46-2.79A12.8,12.8,0,0,1,62.25,28Zm12-1.34A6.77,6.77,0,0,0,73,22.55a4,4,0,0,0-3.33-1.46,4.5,4.5,0,0,0-2,.45,5.31,5.31,0,0,0-1.56,1.23,5.61,5.61,0,0,0-1,1.77,7.55,7.55,0,0,0-.44,2.12Z"}),t("path",{d:"M86.87,19.26a12.37,12.37,0,0,1,2,.16,6,6,0,0,1,1.29.33l-.42,1.83a4.77,4.77,0,0,0-1.06-.28,12,12,0,0,0-2.11-.15,10,10,0,0,0-2.2.2,6.84,6.84,0,0,0-1.09.32V36.45H81.13V20.37a15.3,15.3,0,0,1,2.25-.73A14,14,0,0,1,86.87,19.26Z"}),t("path",{d:"M92.31,28A10.72,10.72,0,0,1,93,24.14a8.53,8.53,0,0,1,1.66-2.76A6.62,6.62,0,0,1,97,19.73a7.32,7.32,0,0,1,2.72-.53,6.33,6.33,0,0,1,4.94,2c1.23,1.35,1.85,3.42,1.85,6.23,0,.17,0,.34,0,.52s0,.34,0,.49H94.56a7.48,7.48,0,0,0,1.54,4.76,5.7,5.7,0,0,0,4.56,1.66,9.12,9.12,0,0,0,2.74-.33,11.41,11.41,0,0,0,1.47-.55l.39,1.83a9.48,9.48,0,0,1-1.71.62,11.2,11.2,0,0,1-3,.35,9.78,9.78,0,0,1-3.79-.65,6.71,6.71,0,0,1-2.57-1.82,7.19,7.19,0,0,1-1.47-2.79A13.19,13.19,0,0,1,92.31,28Zm12-1.34A6.64,6.64,0,0,0,103,22.55a4,4,0,0,0-3.32-1.46,4.5,4.5,0,0,0-2,.45,5.35,5.35,0,0,0-1.57,1.23,5.78,5.78,0,0,0-1,1.77,7.22,7.22,0,0,0-.44,2.12Z"}),t("path",{d:"M124.6,35.92a17.79,17.79,0,0,1-2.42.62,18.92,18.92,0,0,1-3.71.3,8.92,8.92,0,0,1-3.38-.61,7.3,7.3,0,0,1-2.61-1.74,7.82,7.82,0,0,1-1.69-2.77,10.42,10.42,0,0,1-.61-3.69,11.74,11.74,0,0,1,.51-3.54,8.14,8.14,0,0,1,1.48-2.78,6.68,6.68,0,0,1,2.4-1.83,7.78,7.78,0,0,1,3.24-.65,8.14,8.14,0,0,1,2.89.47,7.76,7.76,0,0,1,1.78.9V11.53l2.12-.39Zm-2.12-13.27a8.64,8.64,0,0,0-.74-.49,8.14,8.14,0,0,0-1-.49,9.15,9.15,0,0,0-1.28-.37,6.6,6.6,0,0,0-1.43-.15,5.58,5.58,0,0,0-2.62.56,4.76,4.76,0,0,0-1.72,1.48,6.24,6.24,0,0,0-.94,2.18,11.47,11.47,0,0,0-.3,2.66,7.21,7.21,0,0,0,1.67,5.11,5.75,5.75,0,0,0,4.4,1.77,19,19,0,0,0,2.53-.14,9.61,9.61,0,0,0,1.45-.31Z"}),t("path",{d:"M148.16,20.6a7.76,7.76,0,0,1,1.78-.9,8.1,8.1,0,0,1,2.89-.47,7.78,7.78,0,0,1,3.24.65,6.77,6.77,0,0,1,2.4,1.83A8.14,8.14,0,0,1,160,24.49a11.74,11.74,0,0,1,.51,3.54,10.42,10.42,0,0,1-.61,3.69,7.82,7.82,0,0,1-1.69,2.77,7.3,7.3,0,0,1-2.61,1.74,8.92,8.92,0,0,1-3.38.61,18.92,18.92,0,0,1-3.71-.3,17.79,17.79,0,0,1-2.42-.62V11.53l2.12-.39Zm0,13.86a9.61,9.61,0,0,0,1.45.31,18.88,18.88,0,0,0,2.53.14,5.75,5.75,0,0,0,4.4-1.77A7.21,7.21,0,0,0,158.21,28a11.47,11.47,0,0,0-.3-2.66,6.24,6.24,0,0,0-.94-2.18,4.81,4.81,0,0,0-1.71-1.48,5.65,5.65,0,0,0-2.63-.56,6.6,6.6,0,0,0-1.43.15,8.78,8.78,0,0,0-1.28.37,8.14,8.14,0,0,0-1,.49,8.64,8.64,0,0,0-.74.49Z"}),t("path",{d:"M169.65,36.8c-.71-1.32-1.39-2.71-2.06-4.14s-1.29-2.88-1.86-4.35-1.11-2.94-1.59-4.4-.89-2.91-1.24-4.32h2.25c.24,1,.54,2.17.91,3.37s.79,2.45,1.26,3.74,1,2.6,1.54,3.94,1.18,2.68,1.85,4c.49-1.34.91-2.61,1.29-3.81s.72-2.38,1-3.56.62-2.4.92-3.64.6-2.58.91-4H177q-1.06,4.72-2.39,9.2A78.17,78.17,0,0,1,171.71,37a18,18,0,0,1-1.28,2.53A7.45,7.45,0,0,1,169,41.24a5.21,5.21,0,0,1-1.87,1,8.46,8.46,0,0,1-2.5.33,5.27,5.27,0,0,1-1.49-.2,5.39,5.39,0,0,1-.84-.29l.43-1.76a3.35,3.35,0,0,0,.73.27,4.36,4.36,0,0,0,1.26.18,6.45,6.45,0,0,0,1.65-.19,3.59,3.59,0,0,0,1.32-.67,4.93,4.93,0,0,0,1.07-1.22A10.93,10.93,0,0,0,169.65,36.8Z"}),t("path",{d:"M216.92,24.48a16.13,16.13,0,0,1-.85,5.39A12.12,12.12,0,0,1,213.64,34a10.77,10.77,0,0,1-3.79,2.67,12.17,12.17,0,0,1-4.88,1,12,12,0,0,1-4.86-1A10.88,10.88,0,0,1,196.34,34a12.32,12.32,0,0,1-2.45-4.14,15.63,15.63,0,0,1-.88-5.39,15.4,15.4,0,0,1,.88-5.35A11.91,11.91,0,0,1,196.37,15a10.83,10.83,0,0,1,3.78-2.65,13,13,0,0,1,9.65,0A10.6,10.6,0,0,1,213.59,15,12.16,12.16,0,0,1,216,19.13,15.4,15.4,0,0,1,216.92,24.48Zm-5.9,0a9.76,9.76,0,0,0-1.6-5.88,5.66,5.66,0,0,0-8.91,0,9.76,9.76,0,0,0-1.59,5.88,10,10,0,0,0,1.59,6,5.63,5.63,0,0,0,8.91,0A10,10,0,0,0,211,24.48Z"}),t("path",{d:"M237.07,17.24c-.47-.15-1.13-.32-2-.5a15,15,0,0,0-2.93-.26,12.38,12.38,0,0,0-2,.19,11.9,11.9,0,0,0-1.5.34V37h-5.76V13.24a31.28,31.28,0,0,1,4.17-1.16,25.55,25.55,0,0,1,5.54-.55c.39,0,.83,0,1.34.07s1,.11,1.52.19,1,.17,1.48.29a10.7,10.7,0,0,1,1.14.31Z"}),t("path",{d:"M264.51,24.53a15.58,15.58,0,0,1-.88,5.41,11.78,11.78,0,0,1-2.52,4.12,11,11,0,0,1-4,2.62,14.63,14.63,0,0,1-5.29.91,34,34,0,0,1-5.45-.43,34.71,34.71,0,0,1-4.32-1V1L247.84,0V12.91a13.21,13.21,0,0,1,2.45-.95,11.2,11.2,0,0,1,3.22-.43,11.35,11.35,0,0,1,4.69.93,9.21,9.21,0,0,1,3.45,2.64,12.17,12.17,0,0,1,2.12,4.12A17.84,17.84,0,0,1,264.51,24.53Zm-5.91-.09a10.2,10.2,0,0,0-1.45-5.81,5.16,5.16,0,0,0-4.6-2.15,8.85,8.85,0,0,0-4.71,1.38V32.2a12.53,12.53,0,0,0,1.59.26,19.76,19.76,0,0,0,2.36.12,6.16,6.16,0,0,0,5-2.16A9,9,0,0,0,258.6,24.44Z"}),t("path",{d:"M276.9,4.76a3.32,3.32,0,0,1-1,2.58,3.6,3.6,0,0,1-2.48.95,3.64,3.64,0,0,1-2.52-.95,3.32,3.32,0,0,1-1.05-2.58,3.37,3.37,0,0,1,1.05-2.62,3.64,3.64,0,0,1,2.52-1,3.6,3.6,0,0,1,2.48,1A3.37,3.37,0,0,1,276.9,4.76Z"}),t("rect",{x:"270.51",y:"12.05",width:"5.76",height:"24.91"}),t("path",{d:"M289.85,32.82a7.52,7.52,0,0,0,3.34-.55,1.94,1.94,0,0,0,1.05-1.88,2.47,2.47,0,0,0-1.12-2.05,16.73,16.73,0,0,0-3.7-1.76,30.09,30.09,0,0,1-2.88-1.21,9.87,9.87,0,0,1-2.26-1.5,6.13,6.13,0,0,1-1.5-2.08,7.13,7.13,0,0,1-.55-3,6.48,6.48,0,0,1,2.53-5.41,10.83,10.83,0,0,1,6.86-2,23.33,23.33,0,0,1,7.19,1.19l-1.05,4.67a13.68,13.68,0,0,0-2.43-.78,14.56,14.56,0,0,0-3.43-.36,6.08,6.08,0,0,0-2.86.59A2,2,0,0,0,288,18.58a2.65,2.65,0,0,0,.21,1.09,2.43,2.43,0,0,0,.74.89,7.62,7.62,0,0,0,1.38.81,22,22,0,0,0,2.1.83,34,34,0,0,1,3.48,1.5,9.36,9.36,0,0,1,2.35,1.67,5.71,5.71,0,0,1,1.36,2.12,8.3,8.3,0,0,1,.43,2.85,6.15,6.15,0,0,1-2.64,5.41c-1.77,1.22-4.28,1.84-7.55,1.84a20.84,20.84,0,0,1-5.29-.55,28.87,28.87,0,0,1-2.81-.88l1-4.81a28.54,28.54,0,0,0,3.07,1A16.2,16.2,0,0,0,289.85,32.82Z"})]})})}),Dt=({context:n,algorithm:i="all-context-master-posts",postboxPlaceholder:s="Share your comment here",overflowLimit:v=0,showToggleRepliesButton:u=!1})=>{const y=c.useRef(),{orbis:b,showPoweredByOrbis:E}=oe(),[l,d]=c.useState(0),[p,a]=c.useState([]),[_,k]=c.useState(!1),[j,H]=c.useState(!1),[F,S]=c.useState(0),[f,x]=c.useState(!1),Z=async O=>{if(!b||!n||_)return;const W=O?.reset?[]:[...p];O?.polling||(x(!0),k(!0));const{data:G,error:U}=await b.getPosts({context:n,algorithm:i},O?.polling||O?.reset?0:l);if(G)if(O?.polling){const K=G.filter(J=>!W.some(q=>J.stream_id===q.stream_id));K.length>0&&(a([...K,...W]),S(J=>J+K.length))}else{a([...W,...G]);const K=O?.reset?1:l+1;d(K),H(G.length>=50),x(!1),k(!1)}U&&console.error(U)},ee=O=>{const W=[O,...p];a(W)};return Be(()=>{Z({polling:!0})},f?null:1e4),c.useEffect(()=>{n&&(d(0),setTimeout(()=>{Z({reset:!0})},100))},[n]),g("div",{ref:y,className:"comments",children:[t("div",{className:"comments__postbox",children:t(we,{context:n,placeholder:s,popoverPosition:"bottom",callback:ee,enterToShare:!1})}),g("div",{className:"comments__posts",children:[p.map(O=>t(Nt,{post:O,overflowLimit:v,showToggleRepliesButton:u},O.stream_id)),j&&!_&&t(Ot,{onClick:()=>Z()}),_&&t(Tt,{}),F>0&&g("div",{children:[F," New ",F>1?"Messages":"Message"]})]}),E&&t(Mt,{})]})},or="";I.Comments=Dt,I.OrbisProvider=St,I.useOrbis=oe,Object.defineProperties(I,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
